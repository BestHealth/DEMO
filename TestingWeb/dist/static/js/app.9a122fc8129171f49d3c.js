webpackJsonp([1],{"/68x":function(e,t){},"0F3N":function(e,t){},"1ZaZ":function(e,t){},"5M1G":function(e,t){},6423:function(e,t){},"6Qis":function(e,t){},"8/ux":function(e,t){},"8d6D":function(e,t){},BweZ:function(e,t){},Css8:function(e,t){},DLIB:function(e,t){},GXbe:function(e,t){},H6wq:function(e,t){},HtZD:function(e,t){},J0Nn:function(e,t){},J7lH:function(e,t){},N02b:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};a.d(n,"baseUrl",function(){return Xe}),a.d(n,"register",function(){return We}),a.d(n,"login",function(){return Qe}),a.d(n,"addProject",function(){return et}),a.d(n,"deleteProject",function(){return tt}),a.d(n,"getProjectList",function(){return at}),a.d(n,"getProjectDetail",function(){return nt}),a.d(n,"getPagination",function(){return it}),a.d(n,"updateProject",function(){return st}),a.d(n,"getDebugtalk",function(){return rt}),a.d(n,"updateDebugtalk",function(){return ot}),a.d(n,"runDebugtalk",function(){return lt}),a.d(n,"getTree",function(){return ct}),a.d(n,"updateTree",function(){return ut}),a.d(n,"uploadFile",function(){return dt}),a.d(n,"addAPI",function(){return pt}),a.d(n,"updateAPI",function(){return ht}),a.d(n,"apiList",function(){return mt}),a.d(n,"delAPI",function(){return ft}),a.d(n,"delAllAPI",function(){return vt}),a.d(n,"getAPISingle",function(){return gt}),a.d(n,"getPaginationBypage",function(){return bt}),a.d(n,"addTestCase",function(){return _t}),a.d(n,"updateTestCase",function(){return yt}),a.d(n,"testList",function(){return kt}),a.d(n,"deleteTest",function(){return wt}),a.d(n,"delAllTest",function(){return xt}),a.d(n,"coptTest",function(){return Tt}),a.d(n,"editTest",function(){return Ct}),a.d(n,"getTestPaginationBypage",function(){return St}),a.d(n,"addConfig",function(){return $t}),a.d(n,"updateConfig",function(){return Pt}),a.d(n,"configList",function(){return Dt}),a.d(n,"copyConfig",function(){return At}),a.d(n,"copyAPI",function(){return It}),a.d(n,"deleteConfig",function(){return Ft}),a.d(n,"delAllConfig",function(){return jt}),a.d(n,"getConfigPaginationBypage",function(){return Vt}),a.d(n,"getAllConfig",function(){return Rt}),a.d(n,"runSingleAPI",function(){return Nt}),a.d(n,"runAPIByPk",function(){return Lt}),a.d(n,"runAPITree",function(){return Et}),a.d(n,"runSingleTestSuite",function(){return qt}),a.d(n,"runSingleTest",function(){return Bt}),a.d(n,"runTestByPk",function(){return Mt}),a.d(n,"runSuiteTree",function(){return zt}),a.d(n,"addVariables",function(){return Ht}),a.d(n,"variablesList",function(){return Ot}),a.d(n,"getVariablesPaginationBypage",function(){return Ut}),a.d(n,"updateVariables",function(){return Jt}),a.d(n,"deleteVariables",function(){return Kt}),a.d(n,"delAllVariabels",function(){return Gt}),a.d(n,"reportList",function(){return Zt}),a.d(n,"deleteReports",function(){return Yt}),a.d(n,"getReportsPaginationBypage",function(){return Xt}),a.d(n,"delAllReports",function(){return Wt}),a.d(n,"watchSingleReports",function(){return Qt}),a.d(n,"addTask",function(){return ea}),a.d(n,"taskList",function(){return ta}),a.d(n,"getTaskPaginationBypage",function(){return aa}),a.d(n,"deleteTasks",function(){return na}),a.d(n,"delAllTasks",function(){return ia}),a.d(n,"addHostIP",function(){return sa}),a.d(n,"hostList",function(){return ra}),a.d(n,"updateHost",function(){return oa}),a.d(n,"deleteHost",function(){return la}),a.d(n,"delAllHost",function(){return ca}),a.d(n,"getHostPaginationBypage",function(){return ua}),a.d(n,"getAllHost",function(){return da}),a.d(n,"runTask",function(){return pa}),a.d(n,"syncCaseStep",function(){return ha}),a.d(n,"syncTest",function(){return ma}),a.d(n,"moveCase",function(){return fa}),a.d(n,"moveAPI",function(){return va}),a.d(n,"updateTask",function(){return ga}),a.d(n,"addMockAPI",function(){return ba}),a.d(n,"getMockPaginationBypage",function(){return _a}),a.d(n,"mockApiList",function(){return ya}),a.d(n,"delMockAPI",function(){return ka}),a.d(n,"delAllMockAPI",function(){return wa}),a.d(n,"getMockAPISingle",function(){return xa}),a.d(n,"updateMockAPI",function(){return Ta}),a.d(n,"copyMockAPI",function(){return Ca}),a.d(n,"moveMockAPI",function(){return Sa}),a.d(n,"patchMockApi",function(){return $a}),a.d(n,"patchTask",function(){return Pa}),a.d(n,"runMockAPIByPk",function(){return Da});var i=a("7+uW"),s=a("zL8q"),r=a.n(s),o=(a("tvR6"),{render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]});var l=a("VU/8")({name:"App"},o,!1,function(e){a("kYWU")},null,null).exports,c=a("/ocq"),u={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticClass:"nav-header"},[t("span",{staticStyle:{color:"white","font-size":"25px","margin-left":"10px"}},[this._v("TestingRunner 管理平台")]),this._v(" "),t("span",{staticClass:"right"},[t("div",{staticStyle:{float:"right",color:"#d9d9d9","margin-right":"80px"}},[t("i",{staticClass:"el-icon-user-solid"}),this._v(" "),t("span",{staticStyle:{"padding-left":"5px","font-size":"large"},domProps:{textContent:this._s(this.$store.state.user)}}),this._v(" "),t("a",{staticStyle:{"padding-left":"10px"},on:{click:this.handleLogOut}},[this._v("注 销")])])])])])},staticRenderFns:[]};var d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-menu",{staticClass:"common-side-bar",attrs:{"default-active":e.$store.state.routerName,"background-color":"#304056","text-color":"#BFCBD9","active-text-color":"#318DF1"},on:{select:e.select}},[a("el-menu-item",{attrs:{index:"Pressure",disabled:""}},[a("i",{staticClass:"el-icon-s-home"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("系统概述")])]),e._v(" "),a("el-submenu",{attrs:{index:"ProjectTest"}},[a("template",{attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"el-icon-menu"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("项目管理")])]),e._v(" "),a("el-menu-item",{attrs:{index:"ProjectList"}},[a("i",{staticClass:"el-icon-s-operation"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("项目概述")])]),e._v(" "),a("el-menu-item",{attrs:{index:"ProjectDetail",disabled:"ProjectList"===e.$store.state.routerName}},[a("i",{staticClass:"el-icon-s-order"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("项目详情")])])],2),e._v(" "),a("el-submenu",{attrs:{index:"ApiTest",disabled:"ProjectList"===e.$store.state.routerName}},[a("template",{attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"el-icon-s-ticket"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("接口测试")])]),e._v(" "),a("el-menu-item-group",e._l(e.side_ApiTest,function(t){return a("el-menu-item",{key:t.url,attrs:{index:t.url}},[a("span",{class:t.code}),e._v("  "+e._s(t.name)+"\n            ")])}))],2),e._v(" "),a("el-menu-item",{attrs:{index:"Pressure",disabled:""}},[a("i",{staticClass:"el-icon-s-platform"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("UI 测试")])]),e._v(" "),a("el-submenu",{attrs:{index:"MOCK",disabled:"ProjectList"===e.$store.state.routerName}},[a("template",{attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"el-icon-s-opportunity"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("MOCK接口")])]),e._v(" "),a("el-menu-item-group",e._l(e.MOCK,function(t){return a("el-menu-item",{key:t.url,attrs:{index:t.url}},[a("span",{class:t.code}),e._v("  "+e._s(t.name)+"\n            ")])}))],2),e._v(" "),a("el-menu-item",{attrs:{index:"Register",disabled:""}},[a("i",{staticClass:"el-icon-user-solid"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("权限管理")])])],1)},staticRenderFns:[]};var p={name:"Home",components:{HomeHeader:a("VU/8")({methods:{handleLogOut:function(){this.$store.commit("isLogin",null),this.setLocalValue("token",null),this.$router.push({name:"Login"})}},name:"Header"},u,!1,function(e){a("ir+L")},"data-v-df6eac3e",null).exports,HomeSide:a("VU/8")({name:"Side",data:function(){return{side_ApiTest:[{name:"API 接口",url:"RecordApi",code:"el-icon-s-ticket"},{name:"API 用例",url:"AutoTest",code:"el-icon-s-finance"},{name:"配置管理",url:"RecordConfig",code:"el-icon-s-tools"},{name:"全局变量",url:"GlobalEnv",code:"el-icon-share"},{name:"域名管理",url:"HostIP",code:"el-icon-s-opportunity"},{name:"驱动代码",url:"DebugTalk",code:"el-icon-s-help"},{name:"定时任务",url:"Task",code:"el-icon-s-promotion"},{name:"历史报告",url:"Reports",code:"el-icon-s-data"}],MOCK:[{name:"模拟接口",url:"MOCK",code:"el-icon-coordinate"}]}},methods:{select:function(e){this.$store.commit("setRouterName",e),this.$router.push({name:e}),this.setLocalValue("routerName",e)}}},d,!1,function(e){a("fphc")},"data-v-4f0d9456",null).exports}},h={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-container",[t("el-header",{staticStyle:{background:"#fff",padding:"0",height:"50px"}},[t("home-header")],1),this._v(" "),t("el-container",[t("el-aside",{staticStyle:{width:"202px"}},[t("home-side")],1),this._v(" "),t("el-main",[t("router-view")],1)],1)],1)},staticRenderFns:[]};var m=a("VU/8")(p,h,!1,function(e){a("8d6D")},"data-v-799cedc9",null).exports,f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticClass:"login"},[n("el-header",[n("el-row",[n("el-col",{attrs:{span:4,offset:1}},[n("div")])],1)],1),e._v(" "),n("el-main",{staticStyle:{padding:"0px"}},[n("el-row",[n("el-col",{attrs:{span:7}},[n("div",{staticClass:"bottom-left"},[n("img",{attrs:{src:a("XbMU")}})])]),e._v(" "),n("el-col",{attrs:{span:24}},[n("div",[n("div",{attrs:{id:"form-title"}},[e._v("TestingRunner")]),e._v(" "),n("form",{attrs:{id:"submit-form"}},[n("div",{attrs:{id:"form-content"}},[n("div",{attrs:{id:"form-msg"}},[e._v("注册账号")]),e._v(" "),n("div",{attrs:{id:"form-inputs"}},[n("div",{staticClass:"form-input-div"},[n("i",{staticClass:"iconfont",staticStyle:{position:"absolute",bottom:"375px","padding-left":"10px"}},[e._v("")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.registerForm.username,expression:"registerForm.username"}],attrs:{placeholder:"用户名",type:"text",id:"user"},domProps:{value:e.registerForm.username},on:{input:function(t){t.target.composing||e.$set(e.registerForm,"username",t.target.value)}}}),e._v(" "),n("div",{staticClass:"err_msg",attrs:{id:"user_err"},domProps:{innerHTML:e._s(e.usernameInvalid)},on:{mouseover:function(t){e.usernameInvalid=""}}})]),e._v(" "),n("div",{staticClass:"form-input-div"},[n("i",{staticClass:"iconfont",staticStyle:{position:"absolute",bottom:"312px","padding-left":"10px"}},[e._v("")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.registerForm.password,expression:"registerForm.password"}],attrs:{placeholder:"密码",type:"password",id:"pwd"},domProps:{value:e.registerForm.password},on:{input:function(t){t.target.composing||e.$set(e.registerForm,"password",t.target.value)}}}),e._v(" "),n("div",{staticClass:"err_msg",attrs:{id:"pwd_err"},domProps:{innerHTML:e._s(e.passwordInvalid)},on:{mouseover:function(t){e.passwordInvalid=""}}})]),e._v(" "),n("div",{staticClass:"form-input-div"},[n("i",{staticClass:"iconfont",staticStyle:{position:"absolute",bottom:"250px","padding-left":"10px"}},[e._v("")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.registerForm.repwd,expression:"registerForm.repwd"}],attrs:{placeholder:"确认密码",type:"password",id:"repwd"},domProps:{value:e.registerForm.repwd},on:{input:function(t){t.target.composing||e.$set(e.registerForm,"repwd",t.target.value)}}}),e._v(" "),n("div",{staticClass:"err_msg",attrs:{id:"repwd_err"},domProps:{innerHTML:e._s(e.repwdInvalid)},on:{mouseover:function(t){e.repwdInvalid=""}}})]),e._v(" "),n("div",{staticClass:"form-input-div"},[n("i",{staticClass:"iconfont",staticStyle:{position:"absolute",bottom:"190px","padding-left":"10px"}},[e._v("")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.registerForm.email,expression:"registerForm.email"}],attrs:{placeholder:"邮箱",type:"email",id:"email"},domProps:{value:e.registerForm.email},on:{input:function(t){t.target.composing||e.$set(e.registerForm,"email",t.target.value)}}}),e._v(" "),n("div",{staticClass:"err_msg",attrs:{id:"email_err"},domProps:{innerHTML:e._s(e.emailInvalid)},on:{mouseover:function(t){e.emailInvalid=""}}})]),e._v(" "),n("div",{staticClass:"form-submit"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"button",id:"submitBtn"},on:{click:e.submitForm}},[e._v("立即注册\n                                    ")])])]),e._v(" "),n("div",{staticClass:"form-foot"},[n("span",[e._v("已有账户，"),n("router-link",{attrs:{to:"/runner/login"}},[e._v("立即登陆")])],1)])])])])]),e._v(" "),n("el-col",{attrs:{span:7}},[n("div",{staticClass:"bottom-right"},[n("img",{attrs:{src:a("X4Z/")}})])])],1)],1)],1)},staticRenderFns:[]};var v=a("VU/8")({name:"Register",data:function(){return{registerForm:{username:"",password:"",repwd:"",email:""},passwordInvalid:"",usernameInvalid:"",repwdInvalid:"",emailInvalid:""}},methods:{validateUser:function(){return!!/^[a-zA-Z0-9_-]{4,16}$/.test(this.registerForm.username)||(this.usernameInvalid="用户名4到16位,只能是字母,数字,下划线,连字符",!1)},validatePassword:function(){return!!/^[a-zA-Z\d_]{6,}$/.test(this.registerForm.password)||(this.passwordInvalid="密码至少6位数",!1)},validateRepwd:function(){return this.registerForm.password===this.registerForm.repwd||(this.repwdInvalid="确认密码和密码不一致",!1)},validateEmail:function(){return!!/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(this.registerForm.email)||(this.emailInvalid="邮箱格式不正确",!1)},handleRegisterSuccess:function(e){e.success?this.$router.push("/runner/login"):this.$message.error({message:e.msg,duration:2e3,center:!0})},submitForm:function(e){var t=this;this.validateUser()&&this.validatePassword()&&this.validateRepwd()&&this.validateEmail()&&this.$api.register(this.registerForm).then(function(e){t.handleRegisterSuccess(e)})}}},f,!1,function(e){a("lq6j")},"data-v-e006ef6a",null).exports,g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticClass:"login"},[n("el-header",[n("el-row",[n("el-col",{attrs:{span:4,offset:1}},[n("div")])],1)],1),e._v(" "),n("el-main",{staticStyle:{padding:"0px"}},[n("el-row",[n("el-col",{attrs:{span:7}},[n("div",{staticClass:"bottom-left"},[n("img",{attrs:{src:a("XbMU")}})])]),e._v(" "),n("el-col",{attrs:{span:24}},[n("div",[n("div",{attrs:{id:"form-title"}},[e._v("TestingRunner")]),e._v(" "),n("form",{attrs:{id:"submit-form"}},[n("div",{attrs:{id:"form-content"}},[n("div",{attrs:{id:"form-msg"}},[e._v("登录账号")]),e._v(" "),n("div",{attrs:{id:"form-inputs"}},[n("div",{staticClass:"form-input-div"},[n("i",{staticClass:"iconfont",staticStyle:{position:"absolute",bottom:"250px","padding-left":"10px"}},[e._v("")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.loginForm.username,expression:"loginForm.username"}],attrs:{placeholder:"用户名",type:"text",id:"email"},domProps:{value:e.loginForm.username},on:{input:function(t){t.target.composing||e.$set(e.loginForm,"username",t.target.value)}}}),e._v(" "),n("div",{staticClass:"err_msg",attrs:{id:"email_err"},domProps:{innerHTML:e._s(e.usernameInvalid)},on:{mouseover:function(t){e.usernameInvalid=""}}})]),e._v(" "),n("div",{staticClass:"form-input-div"},[n("i",{staticClass:"iconfont",staticStyle:{position:"absolute",bottom:"190px","padding-left":"10px"}},[e._v("")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.loginForm.password,expression:"loginForm.password"}],attrs:{placeholder:"密码",type:"password",id:"pwd"},domProps:{value:e.loginForm.password},on:{input:function(t){t.target.composing||e.$set(e.loginForm,"password",t.target.value)}}}),e._v(" "),n("div",{staticClass:"err_msg",attrs:{id:"pwd_err"},domProps:{innerHTML:e._s(e.passwordInvalid)},on:{mouseover:function(t){e.passwordInvalid=""}}})]),e._v(" "),n("div",{staticClass:"form-submit"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"button",id:"submitBtn"},on:{click:e.submitForm}},[e._v("立即登录\n                                    ")])])]),e._v(" "),n("div",{staticClass:"form-foot"},[n("span",[e._v("没有账户，"),n("router-link",{attrs:{to:"/runner/register"}},[e._v("立即注册")])],1)])])])])]),e._v(" "),n("el-col",{attrs:{span:7}},[n("div",{staticClass:"bottom-right"},[n("img",{attrs:{src:a("X4Z/")}})])])],1)],1)],1)},staticRenderFns:[]};var b=a("VU/8")({name:"Login",data:function(){return{loginForm:{username:"",password:""},usernameInvalid:"",passwordInvalid:""}},methods:{validateUserName:function(){return""!==this.loginForm.username.replace(/(^\s*)/g,"")||(this.usernameInvalid="用户名不能为空",!1)},validatePassword:function(){return""!==this.loginForm.password.replace(/(^\s*)/g,"")||(this.passwordInvalid="密码不能为空",!1)},handleLoginSuccess:function(e){e.success?(this.$router.push({name:"ProjectList"}),this.$store.commit("isLogin",e.token),this.$store.commit("setUser",e.user),this.$store.commit("setRouterName","ProjectList"),this.setLocalValue("token",e.token),this.setLocalValue("user",e.user),this.setLocalValue("routerName","ProjectList")):this.$message.error({message:e.msg,duration:2e3,center:!0})},submitForm:function(){var e=this;this.validateUserName()&&this.validatePassword()&&this.$api.login(this.loginForm).then(function(t){e.handleLoginSuccess(t)})}}},g,!1,function(e){a("DLIB")},"data-v-736b2f4a",null).exports,_={data:function(){return{dialogVisible:!1,editVisible:!1,selectProject:[],projectData:{results:[]},projectForm:{name:"",desc:"",responsible:this.$store.state.user,id:""},rules:{name:[{required:!0,message:"请输入项目名称",trigger:"blur"},{min:1,max:50,message:"最多不超过50个字符",trigger:"blur"}],desc:[{required:!0,message:"简要描述下该项目",trigger:"blur"},{min:1,max:100,message:"最多不超过100个字符",trigger:"blur"}]},formProject:{projectName:"",responsibleName:""}}},methods:{deleteFileOrDirectory:function(){var e=this.sels.map(function(e){return e.id}).join();console.log(e),this.$confirm("此操作将永久删除该文件及其子文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log("删除成功")})},cancelFileOrDirectory:function(){this.dialogVisible=!1,this.editVisible=!1,this.projectForm.name="",this.projectForm.desc="",this.projectForm.id=""},handleCellClick:function(e){this.$store.commit("setRouterName","ProjectDetail"),this.setLocalValue("routerName","ProjectDetail"),this.$router.push({name:"ProjectDetail",params:{id:e.id}})},handleEdit:function(e,t){this.editVisible=!0,this.projectForm.name=t.name,this.projectForm.desc=t.desc,this.projectForm.id=t.id},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除该项目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$api.deleteProject({data:{id:t.id}}).then(function(e){e.success?(a.success(e),a.getProjectList()):a.failure(e)})})},handleConfirm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return""!==t.projectForm.id?t.editVisible=!0:t.dialogVisible=!0,!1;t.dialogVisible=!1,t.editVisible=!1;(""===t.projectForm.id?t.$api.addProject(t.projectForm):t.$api.updateProject(t.projectForm)).then(function(e){e.success?(t.success(e),t.getProjectList()):t.failure(e),t.projectForm.name="",t.projectForm.desc="",t.projectForm.id=""})})},success:function(e){this.$notify({message:e.msg,type:"success",duration:1e3})},failure:function(e){this.$notify.error({message:e.msg,duration:1e3})},getProjectList:function(){var e=this;this.$api.getProjectList({params:{project:this.formProject.projectName,responsible:this.formProject.responsibleName}}).then(function(t){e.projectData=t})},getPagination:function(e){var t=this;this.$api.getPagination(e).then(function(e){t.projectData=e})},onSubmit:function(){var e=this;this.$api.getProjectList({params:{project:this.formProject.projectName,responsible:this.formProject.responsibleName}}).then(function(t){e.projectData=t})},selectionProject:function(e){this.selectProject=e},delSelectionProject:function(){var e=this;0!==this.selectProject.length?this.$confirm("此操作将永久删除勾选的项目，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.deleteProject({data:e.selectProject}).then(function(t){t.success?(e.success(t),e.getProjectList()):e.failure(t)})}):this.$notify.warning({title:"提示",message:"请至少勾选一个项目",duration:1e3})}},mounted:function(){this.getProjectList()},name:"ProjectList"},y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{background:"#F7F7F7",padding:"0",height:"70px"}},[a("div",[a("div",{staticStyle:{"padding-top":"15px","margin-left":"10px"}},[a("el-form",{staticClass:"inline-block",attrs:{inline:!0,model:e.formProject,size:"small"}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"项目名称"},model:{value:e.formProject.projectName,callback:function(t){e.$set(e.formProject,"projectName",t)},expression:"formProject.projectName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"负责人"},model:{value:e.formProject.responsibleName,callback:function(t){e.$set(e.formProject,"responsibleName",t)},expression:"formProject.responsibleName"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.onSubmit}},[e._v("查询\n                        ")])],1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("\n                        添加项目\n                    ")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==e.selectProject.count,expression:"selectProject.count !== 0 "}],staticStyle:{"margin-left":"20px"},attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:e.delSelectionProject}},[e._v("批量删除\n                    ")])],1),e._v(" "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"info",round:"",size:"small",icon:"el-icon-d-arrow-left",disabled:null===e.projectData.previous},on:{click:function(t){e.getPagination(e.projectData.previous)}}},[e._v("\n                    上一页\n                ")]),e._v(" "),a("el-button",{attrs:{type:"info",round:"",size:"small",disabled:null===e.projectData.next},on:{click:function(t){e.getPagination(e.projectData.next)}}},[e._v("\n                    下一页\n                    "),a("i",{staticClass:"el-icon-d-arrow-right"})]),e._v(" "),a("el-dialog",{attrs:{title:"添加项目",visible:e.dialogVisible,width:"30%",align:"center"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"projectForm",staticClass:"project",attrs:{model:e.projectForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"项目名称",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:e.projectForm.name,callback:function(t){e.$set(e.projectForm,"name",t)},expression:"projectForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"项目描述",prop:"desc"}},[a("el-input",{attrs:{clearable:""},model:{value:e.projectForm.desc,callback:function(t){e.$set(e.projectForm,"desc",t)},expression:"projectForm.desc"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleConfirm("projectForm")}}},[e._v("确 定")])],1)],1)],1)])]),e._v(" "),a("el-container",[a("el-main",{staticStyle:{padding:"0","margin-left":"10px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",data:e.projectData.results,border:"",stripe:"","show-header":e.projectData.results.length>0,"highlight-current-row":""},on:{"selection-change":e.selectionProject}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),e._v(" "),a("el-table-column",{attrs:{label:"项目名称",width:"250",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"font-size":"18px","font-weight":"bold",cursor:"pointer"},on:{click:function(a){e.handleCellClick(t.row)}}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"负责人",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.responsible))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"项目描述",width:"450",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.desc))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"更新时间",width:"260",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("datetimeFormat")(t.row.update_time)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"medium"},on:{click:function(a){e.handleCellClick(t.row)}}},[e._v("详情\n                        ")]),e._v(" "),a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑\n                        ")]),e._v(" "),a("el-dialog",{attrs:{title:"编辑项目",visible:e.editVisible,width:"30%"},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{ref:"projectForm",staticClass:"project",attrs:{model:e.projectForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"项目名称",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:e.projectForm.name,callback:function(t){e.$set(e.projectForm,"name",t)},expression:"projectForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"项目描述",prop:"desc"}},[a("el-input",{attrs:{clearable:""},model:{value:e.projectForm.desc,callback:function(t){e.$set(e.projectForm,"desc",t)},expression:"projectForm.desc"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancelFileOrDirectory}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleConfirm("projectForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-button",{attrs:{size:"medium",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除\n                        ")])]}}])})],1)],1)],1)],1)},staticRenderFns:[]};var k=a("VU/8")(_,y,!1,function(e){a("BweZ")},"data-v-f1913ec8",null).exports,w={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ul",{staticClass:"title-project"},[a("li",{staticClass:"title-li",attrs:{title:"Test API Project"}},[a("b",[e._v(e._s(e.projectInfo.name))]),e._v(" "),a("b",{staticClass:"desc-li"},[e._v(e._s(e.projectInfo.desc))])])]),e._v(" "),a("ul",{staticClass:"project_detail"},[a("li",{staticClass:"pull-left"},[a("p",{staticClass:"title-p"},[a("i",{staticClass:"iconfont"},[e._v("")]),e._v("  "+e._s(e.projectInfo.api_count)+" 个接口")]),e._v(" "),a("p",{staticClass:"desc-p"},[e._v("接口总数")])]),e._v(" "),a("li",{staticClass:"pull-left"},[a("p",{staticClass:"title-p"},[a("i",{staticClass:"iconfont"},[e._v("")]),e._v("  "+e._s(e.projectInfo.case_count)+" 个用例")]),e._v(" "),a("p",{staticClass:"desc-p"},[e._v("用例集总数")])]),e._v(" "),a("li",{staticClass:"pull-left"},[a("p",{staticClass:"title-p"},[a("i",{staticClass:"iconfont"},[e._v("")]),e._v("  "+e._s(e.projectInfo.config_count)+" 套配置")]),e._v(" "),a("p",{staticClass:"desc-p"},[e._v("配置总数")])]),e._v(" "),a("li",{staticClass:"pull-left"},[a("p",{staticClass:"title-p"},[a("i",{staticClass:"iconfont"},[e._v("")]),e._v("  "+e._s(e.projectInfo.variables_count)+" 对变量")]),e._v(" "),a("p",{staticClass:"desc-p"},[e._v("全局变量对数")])])]),e._v(" "),a("ul",{staticClass:"project_detail"},[a("li",{staticClass:"pull-left"},[a("p",{staticClass:"title-p"},[a("i",{staticClass:"iconfont"},[e._v("")]),e._v("  "+e._s(e.projectInfo.host_count)+" 套环境")]),e._v(" "),a("p",{staticClass:"desc-p"},[e._v("环境总数")])]),e._v(" "),a("li",{staticClass:"pull-left"},[a("p",{staticClass:"title-p"},[a("i",{staticClass:"iconfont"},[e._v("")]),e._v("  "+e._s(e.projectInfo.task_count)+" 项任务")]),e._v(" "),a("p",{staticClass:"desc-p"},[e._v("定时任务个数")])]),e._v(" "),a("li",{staticClass:"pull-left"},[a("p",{staticClass:"title-p"},[a("i",{staticClass:"iconfont"},[e._v("")]),e._v("  "+e._s(e.projectInfo.report_count)+" 个报告")]),e._v(" "),a("p",{staticClass:"desc-p"},[e._v("测试报告总数")])])])])},staticRenderFns:[]};var x=a("VU/8")({name:"ProjectDetail",data:function(){return{projectInfo:{}}},methods:{success:function(e){this.$notify({message:e.msg,type:"success",duration:1e3})},failure:function(e){this.$notify.error({message:e.msg,duration:1e3})},getProjectDetail:function(){var e=this,t=this.$route.params.id;this.$api.getProjectDetail(t).then(function(t){e.projectInfo=t})}},mounted:function(){this.getProjectDetail()}},w,!1,function(e){a("euD6")},"data-v-14125540",null).exports,T={data:function(){return{codeHeight:500,code:{code:"",id:""},resp:{msg:""}}},name:"DebugTalk",methods:{handleRunCode:function(){var e=this;this.resp.msg="",this.$api.runDebugtalk(this.code).then(function(t){e.resp=t})},handleConfirm:function(){var e=this;this.$api.updateDebugtalk(this.code).then(function(t){e.getDebugTalk(),e.$message.success("代码保存成功")})},editorInit:function(){a("R3yc"),a("2qnb"),a("eKfU"),a("SOV9")},getDebugTalk:function(){var e=this;this.$api.getDebugtalk(this.$route.params.id).then(function(t){e.code=t})}},components:{editor:a("o4sT")},mounted:function(){this.getDebugTalk(),this.codeHeight=window.screen.height-248}},C={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{"background-color":"#F7F7F7",padding:"0",height:"50px"}},[a("div",{staticStyle:{"padding-top":"10px","margin-left":"30px"}},[a("el-row",[a("el-col",{attrs:{span:15}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-check-outline"},on:{click:e.handleConfirm}},[e._v("\n                        点击保存\n                    ")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-caret-right",type:"info",size:"small"},on:{click:e.handleRunCode}},[e._v("\n                        在线运行\n                   ")])],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("h2",[e._v("调试控制台")])])],1)],1)]),e._v(" "),a("el-container",[a("el-main",{staticStyle:{padding:"0","margin-left":"10px"}},[a("el-row",[a("el-col",{attrs:{span:15}},[a("editor",{attrs:{lang:"python",theme:"monokai",width:"100%",height:e.codeHeight,options:{enableSnippets:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0}},on:{init:e.editorInit},model:{value:e.code.code,callback:function(t){e.$set(e.code,"code",t)},expression:"code.code"}})],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("editor",{attrs:{lang:"text",theme:"monokai",width:"100%",height:e.codeHeight},model:{value:e.resp.msg,callback:function(t){e.$set(e.resp,"msg",t)},expression:"resp.msg"}})],1)],1)],1)],1)],1)},staticRenderFns:[]};var S=a("VU/8")(T,C,!1,function(e){a("UX68")},"data-v-464febf2",null).exports,$=a("BO1k"),P=a.n($),D={props:{save:Boolean,header:{require:!1}},methods:{querySearch:function(e,t){var a=this.headerOptions;t(e?a.filter(this.createFilter(e)):a)},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""},handleEdit:function(e,t){this.tableData.push({key:"",value:"",desc:""})},handleDelete:function(e,t){this.tableData.splice(e,1)},parseHeader:function(){var e={header:{},desc:{}},t=!0,a=!1,n=void 0;try{for(var i,s=P()(this.tableData);!(t=(i=s.next()).done);t=!0){var r=i.value;""!==r.key&&""!==r.value&&(e.header[r.key]=r.value,e.desc[r.key]=r.desc)}}catch(e){a=!0,n=e}finally{try{!t&&s.return&&s.return()}finally{if(a)throw n}}return e}},watch:{save:function(){this.$emit("header",this.parseHeader(),this.tableData)},header:function(){0!==this.header.length&&(this.tableData=this.header)}},computed:{height:function(){return window.screen.height-440}},data:function(){return{headerOptions:[{value:"Accept"},{value:"Accept-Charset"},{value:"Accept-Language"},{value:"Accept-Datetime"},{value:"Authorization"},{value:"Cache-Control"},{value:"Connection"},{value:"Cookie"},{value:"Content-Length"},{value:"Content-MD5"},{value:"Content-Type"},{value:"Expect"},{value:"Date"},{value:"From"},{value:"Host"},{value:"If-Match"},{value:"If-Modified-Since"},{value:"If-None-Match"},{value:"If-Range"},{value:"If-Unmodified-Since"},{value:"Max-Forwards"},{value:"Origin"},{value:"Pragma"},{value:"Proxy-Authorization"},{value:"Range"},{value:"Referer"},{value:"TE"},{value:"User-Agent"},{value:"Upgrade"},{value:"Via"},{value:"Warning"}],currentRow:"",tableData:[{key:"",value:"",desc:""}]}},name:"Header"},A={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",data:e.tableData,height:e.height,border:!1,"cell-style":{paddingTop:"4px",paddingBottom:"4px"}},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave}},[a("el-table-column",{attrs:{label:"标签",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-autocomplete",{attrs:{clearable:"","fetch-suggestions":e.querySearch,placeholder:"头部标签"},model:{value:t.row.key,callback:function(a){e.$set(t.row,"key",a)},expression:"scope.row.key"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"内容",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"头部内容"},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"描述",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"头部信息简要描述"},model:{value:t.row.desc,callback:function(a){e.$set(t.row,"desc",a)},expression:"scope.row.desc"}})]}}])}),e._v(" "),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:t.row===e.currentRow,expression:"scope.row === currentRow"}]},[a("el-button",{attrs:{icon:"el-icon-circle-plus-outline",size:"mini",type:"info"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==t.$index,expression:"scope.$index !== 0"}],attrs:{icon:"el-icon-delete",size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}})],1)]}}])})],1)},staticRenderFns:[]};var I=a("VU/8")(D,A,!1,function(e){a("sTA4")},"data-v-e455eee6",null).exports,F={props:{save:Boolean,request:{require:!1}},computed:{height:function(){return window.screen.height-464}},name:"Request",components:{editor:a("o4sT")},watch:{save:function(){this.$emit("request",{form:this.parseForm(),json:this.parseJson(),params:this.parseParams(),files:this.parseFile()},{data:this.formData,params:this.paramsData,json_data:this.jsonData})},request:function(){0!==this.request.length&&(this.formData=this.request.data,this.jsonData=this.request.json_data,this.paramsData=this.request.params)}},methods:{editorInit:function(){a("R3yc"),a("NbQv"),a("hzkg"),a("5WxL")},uploadSuccess:function(e,t,a){var n=t.size;n=n>=1048576?(n/1048576).toFixed(2).toString()+"MB":n>=1024?(n/1024).toFixed(2).toString()+"KB":n.toString()+"Byte",this.formData[this.currentIndex].value=t.name,this.formData[this.currentIndex].size=n,this.fileList=[],e.success||this.$message.error(t.name+e.msg)},uploadFile:function(e){return this.$api.uploadFile()},uploadError:function(e){401===e.status?this.$router.replace({name:"Login"}):this.$message.error("Sorry，文件上传失败啦, 请重试！")},cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""},handleEdit:function(e,t){("data"===this.dataType?this.formData:this.paramsData).push({key:"",value:"",type:1,desc:""})},handleDelete:function(e,t){("data"===this.dataType?this.formData:this.paramsData).splice(e,1)},parseFile:function(){var e={files:{},desc:{}},t=!0,a=!1,n=void 0;try{for(var i,s=P()(this.formData);!(t=(i=s.next()).done);t=!0){var r=i.value;""!==r.key&&5===r.type&&(e.files[r.key]=r.value,e.desc[r.key]=r.desc)}}catch(e){a=!0,n=e}finally{try{!t&&s.return&&s.return()}finally{if(a)throw n}}return e},parseForm:function(){var e={data:{},desc:{}},t=!0,a=!1,n=void 0;try{for(var i,s=P()(this.formData);!(t=(i=s.next()).done);t=!0){var r=i.value;if(""!==r.key&&5!==r.type){var o=this.parseType(r.type,r.value);if("exception"===o)continue;e.data[r.key]=o,e.desc[r.key]=r.desc}}}catch(e){a=!0,n=e}finally{try{!t&&s.return&&s.return()}finally{if(a)throw n}}return e},parseParams:function(){var e={params:{},desc:{}},t=!0,a=!1,n=void 0;try{for(var i,s=P()(this.paramsData);!(t=(i=s.next()).done);t=!0){var r=i.value;""!==r.key&&(e.params[r.key]=r.value,e.desc[r.key]=r.desc)}}catch(e){a=!0,n=e}finally{try{!t&&s.return&&s.return()}finally{if(a)throw n}}return e},parseJson:function(){var e={};if(""!==this.jsonData)try{e=JSON.parse(this.jsonData)}catch(e){this.$notify.error({title:"json错误",message:"不是标准的json数据格式",duration:2e3})}return e},parseType:function(e,t){var a=void 0,n=t+" => "+this.dataTypeOptions[e-1].label+" 转换异常, 该数据自动剔除";switch(e){case 1:a=t;break;case 2:a=parseInt(t);break;case 3:a=parseFloat(t);break;case 4:if("False"!==t&&"True"!==t)return this.$notify.error({title:"类型转换错误",message:n,duration:2e3}),"exception";a={True:!0,False:!1}[t]}return 0===a||a||4===e||1===e?a:(this.$notify.error({title:"类型转换错误",message:n,duration:2e3}),"exception")}},data:function(){return{fileList:[],currentIndex:0,currentRow:"",jsonData:"",formData:[{key:"",value:"",type:1,desc:""}],paramsData:[{key:"",value:"",type:"",desc:""}],dataTypeOptions:[{label:"String",value:1},{label:"Integer",value:2},{label:"Float",value:3},{label:"Boolean",value:4},{label:"File",value:5}],dataOptions:[{label:"data",value:"表单"},{label:"json",value:"json"},{label:"params",value:"params"}],dataType:"json"}}},j={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{"margin-left":"200px"}},[a("el-radio-group",{model:{value:e.dataType,callback:function(t){e.dataType=t},expression:"dataType"}},e._l(e.dataOptions,function(t){return a("el-radio",{key:t.value,attrs:{label:t.label}},[e._v(e._s(t.value)+"\n            ")])}))],1),e._v(" "),a("div",{staticStyle:{"margin-top":"5px"}},[a("el-table",{directives:[{name:"show",rawName:"v-show",value:"json"!==e.dataType,expression:"dataType !== 'json' "}],staticStyle:{width:"100%"},attrs:{"highlight-current-row":"","cell-style":{paddingTop:"4px",paddingBottom:"4px"},strpe:"",height:e.height,data:"data"===e.dataType?e.formData:e.paramsData},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave}},[a("el-table-column",{attrs:{label:"请求Key",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"Key"},model:{value:t.row.key,callback:function(a){e.$set(t.row,"key",a)},expression:"scope.row.key"}})]}}])}),e._v(" "),"data"===e.dataType?a("el-table-column",{attrs:{label:"类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{model:{value:t.row.type,callback:function(a){e.$set(t.row,"type",a)},expression:"scope.row.type"}},e._l(e.dataTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))]}}])}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"请求Value",width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{directives:[{name:"show",rawName:"v-show",value:5!==t.row.type,expression:"scope.row.type !== 5"}],attrs:{clearable:"",placeholder:"Value"},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:5===t.row.type,expression:"scope.row.type === 5"}]},[a("el-col",{attrs:{span:7}},[a("el-upload",{attrs:{"show-file-list":!1,action:e.uploadFile(t.row),limit:1,type:"small","file-list":e.fileList,"on-error":e.uploadError,"on-success":e.uploadSuccess}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){e.currentIndex=t.$index}}},[e._v("选择文件\n                                ")])],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-badge",{staticStyle:{"margin-top":"8px"},attrs:{value:t.row.size}},[a("i",{staticClass:"el-icon-document",domProps:{textContent:e._s(t.row.value)}})])],1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"描述",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"参数简要描述"},model:{value:t.row.desc,callback:function(a){e.$set(t.row,"desc",a)},expression:"scope.row.desc"}})]}}])}),e._v(" "),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:t.row===e.currentRow,expression:"scope.row === currentRow"}]},[a("el-button",{attrs:{icon:"el-icon-circle-plus-outline",size:"mini",type:"info"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==t.$index,expression:"scope.$index !== 0"}],attrs:{icon:"el-icon-delete",size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}})],1)]}}])})],1),e._v(" "),a("editor",{directives:[{name:"show",rawName:"v-show",value:"json"===e.dataType,expression:"dataType === 'json' "}],attrs:{lang:"json",theme:"github",width:"100%",height:e.height},on:{init:e.editorInit},model:{value:e.jsonData,callback:function(t){e.jsonData=t},expression:"jsonData"}})],1)])},staticRenderFns:[]};var V=a("VU/8")(F,j,!1,function(e){a("HtZD")},"data-v-74a19acc",null).exports,R={props:{save:Boolean,extract:{require:!1}},computed:{height:function(){return window.screen.height-440}},watch:{save:function(){this.$emit("extract",this.parseExtract(),this.tableData)},extract:function(){0!==this.extract.length&&(this.tableData=this.extract)}},methods:{cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""},handleEdit:function(e,t){this.tableData.push({key:"",value:"",desc:""})},handleDelete:function(e,t){this.tableData.splice(e,1)},parseExtract:function(){var e={extract:[],desc:{}},t=!0,a=!1,n=void 0;try{for(var i,s=P()(this.tableData);!(t=(i=s.next()).done);t=!0){var r=i.value,o=r.key,l=r.value;if(""!==o&&""!==l){var c={};c[o]=l,e.extract.push(c),e.desc[o]=r.desc}}}catch(e){a=!0,n=e}finally{try{!t&&s.return&&s.return()}finally{if(a)throw n}}return e}},data:function(){return{currentRow:"",tableData:[{key:"",value:"",desc:""}]}},name:"Extract"},N={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",strpe:"",height:e.height,data:e.tableData,"cell-style":{paddingTop:"4px",paddingBottom:"4px"}},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave}},[a("el-table-column",{attrs:{label:"变量名",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"接收抽取值后的变量名"},model:{value:t.row.key,callback:function(a){e.$set(t.row,"key",a)},expression:"scope.row.key"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"抽取表达式",width:"420"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"抽取表达式"},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"描述",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"抽取值简要描述"},model:{value:t.row.desc,callback:function(a){e.$set(t.row,"desc",a)},expression:"scope.row.desc"}})]}}])}),e._v(" "),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:t.row===e.currentRow,expression:"scope.row === currentRow"}]},[a("el-button",{attrs:{icon:"el-icon-circle-plus-outline",size:"mini",type:"info"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==t.$index,expression:"scope.$index !== 0"}],attrs:{icon:"el-icon-delete",size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}})],1)]}}])})],1)},staticRenderFns:[]};var L=a("VU/8")(R,N,!1,function(e){a("J7lH")},"data-v-f4b28ffe",null).exports,E={props:{save:Boolean,validate:{require:!1}},computed:{height:function(){return window.screen.height-440}},watch:{save:function(){this.$emit("validate",this.parseValidate(),this.tableData)},validate:function(){0!==this.validate.length&&(this.tableData=this.validate)}},methods:{querySearch:function(e,t){var a=this.validateOptions;t(e?a.filter(this.createFilter(e)):a)},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""},handleEdit:function(e,t){this.tableData.push({expect:"",actual:"",comparator:"equals",type:1})},handleDelete:function(e,t){this.tableData.splice(e,1)},parseType:function(e,t){var a=void 0,n=t+" => "+this.dataTypeOptions[e-1].label+" 转换异常, 该数据自动剔除";switch(e){case 1:a=t;break;case 2:a=parseInt(t);break;case 3:a=parseFloat(t);break;case 4:if("False"!==t&&"True"!==t)return this.$notify.error({title:"类型转换错误",message:n,duration:2e3}),"exception";a={True:!0,False:!1}[t];break;case 5:case 6:try{a=JSON.parse(t)}catch(e){a=!1}}return 0===a||a||4===e||1===e?a:(this.$notify.error({title:"类型转换错误",message:n,duration:2e3}),"exception")},parseValidate:function(){var e={validate:[]},t=!0,a=!1,n=void 0;try{for(var i,s=P()(this.tableData);!(t=(i=s.next()).done);t=!0){var r=i.value;if(""!==r.actual){var o={},l=this.parseType(r.type,r.expect);if("exception"===l)continue;o[r.comparator]=[r.actual,l],e.validate.push(o)}}}catch(e){a=!0,n=e}finally{try{!t&&s.return&&s.return()}finally{if(a)throw n}}return e}},data:function(){return{currentValidate:"",currentRow:"",tableData:[{expect:"",actual:"",comparator:"equals",type:1}],dataTypeOptions:[{label:"String",value:1},{label:"Integer",value:2},{label:"Float",value:3},{label:"Boolean",value:4},{label:"List",value:5},{label:"Dict",value:6}],validateOptions:[{value:"equals"},{value:"less_than"},{value:"less_than_or_equals"},{value:"greater_than"},{value:"greater_than_or_equals"},{value:"not_equals"},{value:"string_equals"},{value:"length_equals"},{value:"length_greater_than"},{value:"length_greater_than_or_equals"},{value:"length_less_than"},{value:"length_less_than_or_equals"},{value:"contains"},{value:"contained_by"},{value:"type_match"},{value:"regex_match"},{value:"startswith"},{value:"endswith"}]}},name:"Validate"},q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":"","cell-style":{paddingTop:"4px",paddingBottom:"4px"},strpe:"",height:e.height,data:e.tableData},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave}},[a("el-table-column",{attrs:{label:"断言类型",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:t.row.comparator,placement:"bottom",disabled:""===t.row.comparator&&"disabled"}},[a("el-autocomplete",{attrs:{clearable:"","fetch-suggestions":e.querySearch,placeholder:"请输入断言类型"},model:{value:t.row.comparator,callback:function(a){e.$set(t.row,"comparator",a)},expression:"scope.row.comparator"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"",label:"实际返回值",width:"370"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"实际返回值"},model:{value:t.row.actual,callback:function(a){e.$set(t.row,"actual",a)},expression:"scope.row.actual"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"期望类型",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{model:{value:t.row.type,callback:function(a){e.$set(t.row,"type",a)},expression:"scope.row.type"}},e._l(e.dataTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"期望返回值",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"期望返回值"},model:{value:t.row.expect,callback:function(a){e.$set(t.row,"expect",a)},expression:"scope.row.expect"}})]}}])}),e._v(" "),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:t.row===e.currentRow,expression:"scope.row === currentRow"}]},[a("el-button",{attrs:{icon:"el-icon-circle-plus-outline",size:"mini",type:"info"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==t.$index,expression:"scope.$index !== 0"}],attrs:{icon:"el-icon-delete",size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}})],1)]}}])})],1)},staticRenderFns:[]};var B=a("VU/8")(E,q,!1,function(e){a("pkVi")},"data-v-0f2c1ab3",null).exports,M={name:"Variables",props:{save:Boolean,variables:{require:!1}},computed:{height:function(){return window.screen.height-440}},watch:{save:function(){this.$emit("variables",this.parseVariables(),this.tableData)},variables:function(){0!==this.variables.length&&(this.tableData=this.variables)}},methods:{cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""},handleEdit:function(e,t){this.tableData.push({key:"",value:"",type:1,desc:""})},handleDelete:function(e,t){this.tableData.splice(e,1)},parseType:function(e,t){var a=void 0,n=t+" => "+this.dataTypeOptions[e-1].label+" 转换异常, 该数据自动剔除";switch(e){case 1:a=t;break;case 2:a=parseInt(t);break;case 3:a=parseFloat(t);break;case 4:if("True"!==t&&"False"!==t)return this.$notify.error({title:"类型转换错误",message:n,duration:2e3}),"exception";a={True:!0,False:!1}[t];break;case 5:case 6:try{a=JSON.parse(t)}catch(e){a=!1}}return 0===a||a||4===e||1===e?a:(this.$notify.error({title:"类型转换错误",message:n,duration:2e3}),"exception")},parseVariables:function(){var e={variables:[],desc:{}},t=!0,a=!1,n=void 0;try{for(var i,s=P()(this.tableData);!(t=(i=s.next()).done);t=!0){var r=i.value;if(""!==r.key){var o={},l=this.parseType(r.type,r.value);if("exception"===l)continue;o[r.key]=l,e.variables.push(o),e.desc[r.key]=r.desc}}}catch(e){a=!0,n=e}finally{try{!t&&s.return&&s.return()}finally{if(a)throw n}}return e}},data:function(){return{currentRow:"",tableData:[{key:"",value:"",type:1,desc:""}],dataTypeOptions:[{label:"String",value:1},{label:"Integer",value:2},{label:"Float",value:3},{label:"Boolean",value:4},{label:"List",value:5},{label:"Dict",value:6}],dataType:"data"}}},z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":"","cell-style":{paddingTop:"4px",paddingBottom:"4px"},strpe:"",height:e.height,data:e.tableData},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave}},[a("el-table-column",{attrs:{label:"变量名",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"Key"},model:{value:t.row.key,callback:function(a){e.$set(t.row,"key",a)},expression:"scope.row.key"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{model:{value:t.row.type,callback:function(a){e.$set(t.row,"type",a)},expression:"scope.row.type"}},e._l(e.dataTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"变量值",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"Value"},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"内容",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"变量简要描述"},model:{value:t.row.desc,callback:function(a){e.$set(t.row,"desc",a)},expression:"scope.row.desc"}})]}}])}),e._v(" "),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:t.row===e.currentRow,expression:"scope.row === currentRow"}]},[a("el-button",{attrs:{icon:"el-icon-circle-plus-outline",size:"mini",type:"info"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==t.$index,expression:"scope.$index !== 0"}],attrs:{icon:"el-icon-delete",size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}})],1)]}}])})],1)},staticRenderFns:[]};var H=a("VU/8")(M,z,!1,function(e){a("bc5d")},"data-v-dd64fbca",null).exports,O={props:{save:Boolean,hooks:{require:!1}},computed:{height:function(){return window.screen.height-440}},watch:{save:function(){this.$emit("hooks",this.parse_hooks(),this.tableData)},hooks:function(){0!==this.hooks.length&&(this.tableData=this.hooks)}},methods:{cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""},handleEdit:function(e,t,a){this.tableData.push({setup:"",teardown:""})},handleDelete:function(e,t){this.tableData.splice(e,1)},parse_hooks:function(){var e={setup_hooks:[],teardown_hooks:[]},t=!0,a=!1,n=void 0;try{for(var i,s=P()(this.tableData);!(t=(i=s.next()).done);t=!0){var r=i.value;""!==r.setup&&e.setup_hooks.push(r.setup),""!==r.teardown&&e.teardown_hooks.push(r.teardown)}}catch(e){a=!0,n=e}finally{try{!t&&s.return&&s.return()}finally{if(a)throw n}}return e}},data:function(){return{currentRow:"",tableData:[{setup:"",teardown:""}]}},name:"Hooks"},U={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":"","cell-style":{paddingTop:"4px",paddingBottom:"4px"},strpe:"",height:e.height,data:e.tableData},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave}},[a("el-table-column",{attrs:{label:"测试之前执行的方法",width:"500"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"${ setup_hooks function($request, *args, **kwargs) }"},model:{value:t.row.setup,callback:function(a){e.$set(t.row,"setup",a)},expression:"scope.row.setup"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"测试之后执行的方法",width:"500"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"${ teardown_hooks function(response, *args, **kwargs) }"},model:{value:t.row.teardown,callback:function(a){e.$set(t.row,"teardown",a)},expression:"scope.row.teardown"}})]}}])}),e._v(" "),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:t.row===e.currentRow,expression:"scope.row === currentRow"}]},[a("el-button",{attrs:{icon:"el-icon-circle-plus-outline",size:"mini",type:"info"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==t.$index,expression:"scope.$index !== 0"}],attrs:{icon:"el-icon-delete",size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}})],1)]}}])})],1)},staticRenderFns:[]};var J=a("VU/8")(O,U,!1,function(e){a("H6wq")},"data-v-e71015c8",null).exports,K={name:"DebugReport",methods:{handleRequest:function(e){["start_timestamp"].forEach(function(t){delete e[t]});try{e.body=JSON.parse(e.body)}catch(e){}return e},handleContent:function(e){try{e=JSON.parse(e)}catch(e){}return e},handleResponse:function(e){return["response_time_ms","encoding","ok","reason","url","text","json","content_size","content_type"].forEach(function(t){delete e[t]}),e}},props:{summary:{require:!0}}},G={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:[e.summary],size:"medium",border:"",stripe:"","header-cell-style":{textAlign:"center",background:"#F8F8FA"},"cell-style":{textAlign:"center"}}},[a("el-table-column",{attrs:{label:"测试时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("timestampToTime")(t.row.time.start_at)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"持续时间",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(t.row.time.duration.toFixed(3)+" 秒")}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Total",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",[e._v(e._s(t.row.stat.testsRun))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Success",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.row.stat.successes))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Failed",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"danger"}},[e._v(e._s(t.row.stat.failures))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Error",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"warning"}},[e._v(e._s(t.row.stat.errors))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Skipped",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.row.stat.skipped))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Platform"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("HttpRunner: "+e._s(t.row.platform.httprunner_version))]),e._v(" "),a("p",[e._v("Python: "+e._s(t.row.platform.python_version))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.platform.platform))])],1)])]}}])})],1),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),e._l(e.summary.details,function(t){return e._t("default",[a("div",[a("span",{staticStyle:{"font-weight":"bold","font-size":"medium"}},[e._v(e._s(t.name))]),e._v(" "),a("el-popover",{attrs:{placement:"top-start",width:"400",trigger:"hover"}},[a("pre",{staticClass:"code-block"},[e._v(e._s(t.in_out))]),e._v(" "),a("el-button",{attrs:{slot:"reference",round:"",type:"text"},slot:"reference"},[e._v("parameters & output")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.records,border:"","header-cell-style":{textAlign:"center",background:"#F8F8FA"},"cell-style":{textAlign:"center"}}},[a("el-table-column",{attrs:{label:"名 称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"请求地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.meta_data.request.url))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"请求方法"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.meta_data.request.method},[e._v(e._s(t.row.meta_data.request.method))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"响应时间 (ms)"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.meta_data.response.elapsed_ms))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"测试结果"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{class:t.row.status},[e._v(e._s(t.row.status))])]}}])}),e._v(" "),a("el-table-column",{attrs:{type:"expand",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tabs",[a("el-tab-pane",{attrs:{label:"Request"}},[a("pre",{staticClass:"code-block",domProps:{innerHTML:e._s(e.handleRequest(t.row.meta_data.request))}})]),e._v(" "),null!==t.row.meta_data.response.content?a("el-tab-pane",{attrs:{label:"Content"}},[a("pre",{staticClass:"code-block",domProps:{textContent:e._s(e.handleContent(t.row.meta_data.response.content))}})]):e._e(),e._v(" "),a("el-tab-pane",{attrs:{label:"Response"}},[a("pre",{staticClass:"code-block",domProps:{textContent:e._s(e.handleResponse(t.row.meta_data.response))}})]),e._v(" "),0!==t.row.meta_data.validators.length?a("el-tab-pane",{attrs:{label:"Validators"}},[a("pre",{staticClass:"code-block",domProps:{innerHTML:e._s(t.row.meta_data.validators)}})]):e._e(),e._v(" "),""!==t.row.attachment?a("el-tab-pane",{attrs:{label:"Exception"}},[a("pre",{staticClass:"code-block",domProps:{innerHTML:e._s(t.row.attachment)}})]):e._e()],1)]}}])})],1)])})],2)},staticRenderFns:[]};var Z=a("VU/8")(K,G,!1,function(e){a("J0Nn")},"data-v-297601d2",null).exports,Y={components:{Headers:I,Request:V,Extract:L,Validate:B,Variables:H,Hooks:J,Report:Z},props:{host:{require:!1},nodeId:{require:!1},project:{require:!1},config:{require:!1},response:{require:!1}},methods:{reverseStatus:function(){this.save=!this.save,this.run=!0},handleHeader:function(e){this.header=e},handleRequest:function(e){this.request=e},handleValidate:function(e){this.validate=e},handleExtract:function(e){this.extract=e},handleVariables:function(e){this.variables=e},handleHooks:function(e){this.hooks=e,this.run?(this.runAPI(),this.run=!1):""===this.id?this.addAPI():this.updateAPI()},validateData:function(){return""===this.url?(this.$notify.error({title:"url错误",message:"接口请求地址不能为空",duration:1500}),!1):""!==this.name||(this.$notify.error({title:"name错误",message:"接口名称不能为空",duration:1500}),!1)},updateAPI:function(){var e=this;this.validateData()&&this.$api.updateAPI(this.id,{header:this.header,request:this.request,extract:this.extract,validate:this.validate,variables:this.variables,hooks:this.hooks,url:this.url,method:this.method,name:this.name,times:this.times}).then(function(t){t.success?e.$emit("addSuccess"):e.$message.error({message:t.msg,duration:1e3})})},runAPI:function(){var e=this;this.validateData()&&(this.loading=!0,this.$api.runSingleAPI({header:this.header,request:this.request,extract:this.extract,validate:this.validate,variables:this.variables,hooks:this.hooks,url:this.url,method:this.method,name:this.name,times:this.times,project:this.project,config:this.config,host:this.host}).then(function(t){e.summary=t,e.dialogTableVisible=!0,e.loading=!1}).catch(function(t){e.loading=!1}))},addAPI:function(){var e=this;this.validateData()&&this.$api.addAPI({header:this.header,request:this.request,extract:this.extract,validate:this.validate,variables:this.variables,hooks:this.hooks,url:this.url,method:this.method,name:this.name,times:this.times,nodeId:this.nodeId,project:this.project}).then(function(t){t.success?e.$emit("addSuccess"):e.$message.error({message:t.msg,duration:1e3})})}},watch:{response:function(){this.name=this.response.body.name,this.method=this.response.body.method,this.url=this.response.body.url,this.times=this.response.body.times,this.id=this.response.id}},data:function(){return{loading:!1,times:1,name:"",url:"",id:"",header:[],request:[],extract:[],validate:[],variables:[],hooks:[],method:"GET",dialogTableVisible:!1,save:!1,run:!1,summary:{},activeTag:"second",httpOptions:[{label:"GET"},{label:"POST"},{label:"PUT"},{label:"DELETE"},{label:"HEAD"},{label:"OPTIONS"},{label:"PATCH"}]}},name:"ApiBody"},X={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",[a("el-input",{staticStyle:{width:"600px"},attrs:{placeholder:"请输入接口名称",clearable:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[a("template",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("接口信息录入")]),e._v(" "),a("el-button",{attrs:{slot:"append",type:"success",plain:""},on:{click:function(t){e.save=!e.save}},slot:"append"},[e._v("Save\n                ")])],2),e._v(" "),a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"primary",disabled:e.loading},on:{click:e.reverseStatus}},[e._v("Send\n            ")])],1),e._v(" "),a("div",[a("el-input",{staticStyle:{width:"600px","margin-top":"10px"},attrs:{placeholder:"请输入接口请求地址",clearable:""},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}},[a("el-select",{staticStyle:{width:"125px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:e.method,callback:function(t){e.method=t},expression:"method"}},e._l(e.httpOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})}))],1),e._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:"循环次数",placement:"bottom"}},[a("el-input-number",{staticStyle:{width:"120px"},attrs:{"controls-position":"right",min:1,max:100},model:{value:e.times,callback:function(t){e.times=t},expression:"times"}})],1)],1)]),e._v(" "),a("div",{staticClass:"request"},[e.dialogTableVisible?a("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"70%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("report",{attrs:{summary:e.summary}})],1):e._e(),e._v(" "),a("el-tabs",{staticStyle:{"margin-left":"20px"},model:{value:e.activeTag,callback:function(t){e.activeTag=t},expression:"activeTag"}},[a("el-tab-pane",{attrs:{label:"Header",name:"first"}},[a("headers",{attrs:{save:e.save,header:e.response?e.response.body.header:[]},on:{header:e.handleHeader}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Request",name:"second"}},[a("request",{attrs:{save:e.save,request:e.response?e.response.body.request:[]},on:{request:e.handleRequest}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Extract",name:"third"}},[a("extract",{attrs:{save:e.save,extract:e.response?e.response.body.extract:[]},on:{extract:e.handleExtract}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Validate",name:"fourth"}},[a("validate",{attrs:{save:e.save,validate:e.response?e.response.body.validate:[]},on:{validate:e.handleValidate}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Variables",name:"five"}},[a("variables",{attrs:{save:e.save,variables:e.response?e.response.body.variables:[]},on:{variables:e.handleVariables}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Hooks",name:"six"}},[a("hooks",{attrs:{save:e.save,hooks:e.response?e.response.body.hooks:[]},on:{hooks:e.handleHooks}})],1)],1)],1)])},staticRenderFns:[]};var W=a("VU/8")(Y,X,!1,function(e){a("GXbe")},"data-v-34b9dc54",null).exports,Q={filters:{ellipsis:function(e){return e?e.length>40?e.slice(0,40)+"......":e:""},str_ellipsis:function(e){return e?e.length>10?e.slice(0,10)+"......":e:""}},components:{Report:Z},name:"ApiList",props:{host:{require:!0},config:{require:!0},run:Boolean,back:Boolean,node:{require:!0},project:{require:!0},del:Boolean,move:Boolean,onlyMe:Boolean,isSelectCase:Boolean},data:function(){return{checked:!1,search:"",reportName:"",asyncs:!1,filterText:"",loading:!1,expand:"&#xe65f;",dataTree:{},dialogTreeVisible:!1,dialogTableVisible:!1,dialogTreeMoveAPIVisible:!1,summary:{},selectAPI:[],currentRow:"",currentPage:1,apiData:{count:0,results:[]}}},watch:{filterText:function(e){this.$refs.tree.filter(e)},run:function(){this.asyncs=!1,this.reportName="",this.getTree("run")},move:function(){this.asyncs=!1,this.reportName="",this.getTree("move")},back:function(){this.getAPIList()},node:function(){this.search="",this.getAPIList()},checked:function(){this.checked?this.toggleAll():this.toggleClear()},del:function(){var e=this;0!==this.selectAPI.length?this.$confirm("此操作将永久删除API，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.delAllAPI({data:e.selectAPI}).then(function(t){e.getAPIList()})}):this.$notify.warning({title:"提示",message:"请至少选择一个接口",duration:1e3})}},methods:{handleSyncCaseStep:function(e){var t=this;this.$confirm("是否确定把当前 API 同步到用例步骤","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$api.syncCaseStep(e).then(function(e){e.success?(t.getAPIList(),t.$notify.success({title:"提示",message:"用例步骤同步成功",duration:1500})):t.$message.error(e.msg)})}).catch(function(e){return e})},handleCopyAPI:function(e){var t=this;this.$prompt("请输入接口名称","提示",{confirmButtonText:"确定",inputPattern:/^[\s\S]*.*[^\s][\s\S]*$/,inputErrorMessage:"接口名称不能为空"}).then(function(a){var n=a.value;t.$api.copyAPI(e,{name:n}).then(function(e){e.success?t.getAPIList():t.$message.error(e.msg)})})},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},runTree:function(){var e=this;this.dialogTreeVisible=!1;var t=this.$refs.tree.getCheckedKeys();0===t.length?this.$notify.error({title:"提示",message:"请至少选择一个节点",duration:1500}):this.$api.runAPITree({host:this.host,project:this.project,relation:t,async:this.asyncs,name:this.reportName,config:this.config}).then(function(t){t.hasOwnProperty("status")?e.$message.info({message:t.msg,duration:1500}):(e.summary=t,e.dialogTableVisible=!0)})},getTree:function(e){var t=this;this.$api.getTree(this.$route.params.id,{params:{type:1}}).then(function(a){t.dataTree=a.tree,"run"===e?t.dialogTreeVisible=!0:t.dialogTreeMoveAPIVisible=t})},moveAPI:function(){var e=this;this.dialogTreeVisible=!1;var t=this.$refs.tree.getCheckedKeys(),a=t.length;0===a?this.$notify.error({title:"提示",message:"请至少选择一个节点",duration:1500}):1!==a?this.$notify.error({title:"提示",message:"API只能移动到一个节点, 现在选了"+a+"个节点",duration:1500}):this.$api.moveAPI({project:this.project,relation:t[0],api:this.selectAPI}).then(function(t){t.success?(e.getAPIList(),e.$message.success({message:"移动API成功",duration:1500}),e.dialogTreeMoveAPIVisible=!1,e.resetSearch()):e.$message.error({message:t.msg,duration:1500})})},handleSelectionChange:function(e){this.selectAPI=e,this.selectAPI.length>0?this.$emit("update:isSelectAPI",!0):this.$emit("update:isSelectAPI",!1)},toggleAll:function(){this.$refs.multipleTable.toggleAllSelection()},toggleClear:function(){this.$refs.multipleTable.clearSelection()},getAPIList:function(){var e=this;this.$api.apiList({params:{node:this.node,project:this.project,search:this.search}}).then(function(t){e.apiData=t})},handleCurrentChange:function(e){var t=this;this.$api.getPaginationBypage({params:{page:this.currentPage,node:this.node,project:this.project,search:this.search}}).then(function(e){t.apiData=e})},handleDelApi:function(e){var t=this;this.$confirm("此操作将永久删除该API，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$api.delAPI(e).then(function(e){e.success?t.getAPIList():t.$message.error(e.msg)})})},handleRowClick:function(e){var t=this;this.$api.getAPISingle(e.id).then(function(e){e.success?t.$emit("api",e):t.$message.error(e.msg)})},handleRunAPI:function(e){var t=this;this.loading=!0,this.$api.runAPIByPk(e,{params:{host:this.host,config:this.config}}).then(function(e){t.summary=e,t.dialogTableVisible=!0,t.loading=!1}).catch(function(e){t.loading=!1})},cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""}},mounted:function(){this.getAPIList()}},ee={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{padding:"0",height:"50px"}},[a("div",{staticStyle:{"padding-left":"10px"}},[a("el-row",{attrs:{gutter:50}},[a("el-col",{attrs:{span:1}},[e.apiData.count>0?a("el-checkbox",{staticStyle:{"padding-top":"14px","padding-left":"2px"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}):e._e()],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入接口名称",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getAPIList},slot:"append"})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.apiData.count,expression:"apiData.count !== 0 "}],staticStyle:{"margin-top":"5px"},attrs:{"page-size":11,background:"","current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.apiData.count},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)],1)],1)]),e._v(" "),a("el-container",[a("el-main",{staticStyle:{padding:"0","margin-left":"10px"}},[e.dialogTableVisible?a("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"70%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("report",{attrs:{summary:e.summary}})],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"Run API",visible:e.dialogTreeVisible,width:"45%"},on:{"update:visible":function(t){e.dialogTreeVisible=t}}},[a("div",[a("div",[a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:8}},[a("el-switch",{staticStyle:{"margin-top":"10px"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"异步执行","inactive-text":"同步执行"},model:{value:e.asyncs,callback:function(t){e.asyncs=t},expression:"asyncs"}})],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.asyncs,expression:"asyncs"}],attrs:{clearable:"",placeholder:"请输入报告名称",disabled:!1},model:{value:e.reportName,callback:function(t){e.reportName=t},expression:"reportName"}})],1)],1)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-input",{attrs:{placeholder:"输入节点名称进行过滤",size:"medium",clearable:"","prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree",attrs:{"filter-node-method":e.filterNode,data:e.dataTree,"show-checkbox":"","node-key":"id","expand-on-click-node":!1,"check-on-click-node":"","check-strictly":!0,"highlight-current":!0},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node;return t.data,a("span",{staticClass:"custom-tree-node"},[a("span",[a("i",{staticClass:"iconfont",domProps:{innerHTML:e._s(e.expand)}}),e._v("  "+e._s(n.label))])])}}])})],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTreeVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.runTree}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"Move API",visible:e.dialogTreeMoveAPIVisible,width:"45%"},on:{"update:visible":function(t){e.dialogTreeMoveAPIVisible=t}}},[a("div",[a("div",{staticStyle:{"margin-top":"20px"}},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤",size:"medium",clearable:"","prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree",attrs:{"filter-node-method":e.filterNode,data:e.dataTree,"show-checkbox":"","node-key":"id","expand-on-click-node":!1,"check-on-click-node":"","check-strictly":!0,"highlight-current":!0},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node;return t.data,a("span",{staticClass:"custom-tree-node"},[a("span",[a("i",{staticClass:"iconfont",domProps:{innerHTML:e._s(e.expand)}}),e._v("  "+e._s(n.label))])])}}])})],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTreeMoveAPIVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.moveAPI}},[e._v("确 定")])],1)]),e._v(" "),a("div",{staticStyle:{position:"fixed",bottom:"0",right:"0",left:"500px",top:"160px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",height:"calc(100%)",data:e.apiData.results,"show-header":!1,"cell-style":{paddingTop:"4px",paddingBottom:"4px"}},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"450",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["POST"===t.row.method.toUpperCase()?a("div",{staticClass:"block block_post"},[a("span",{staticClass:"block-method block_method_post block_method_color"},[e._v("POST")]),e._v(" "),a("span",{staticClass:"block-method block_url"},[e._v(e._s(e._f("ellipsis")(t.row.url)))]),e._v(" "),a("span",{staticClass:"block-summary-description"},[e._v(e._s(e._f("str_ellipsis")(t.row.name)))])]):e._e(),e._v(" "),"GET"===t.row.method.toUpperCase()?a("div",{staticClass:"block block_get"},[a("span",{staticClass:"block-method block_method_get block_method_color"},[e._v("GET")]),e._v(" "),a("span",{staticClass:"block-method block_url"},[e._v(e._s(e._f("ellipsis")(t.row.url)))]),e._v(" "),a("span",{staticClass:"block-summary-description"},[e._v(e._s(e._f("str_ellipsis")(t.row.name)))])]):e._e(),e._v(" "),"PUT"===t.row.method.toUpperCase()?a("div",{staticClass:"block block_put"},[a("span",{staticClass:"block-method block_method_put block_method_color"},[e._v("PUT")]),e._v(" "),a("span",{staticClass:"block-method block_url"},[e._v(e._s(e._f("ellipsis")(t.row.url)))]),e._v(" "),a("span",{staticClass:"block-summary-description"},[e._v(e._s(e._f("str_ellipsis")(t.row.name)))])]):e._e(),e._v(" "),"DELETE"===t.row.method.toUpperCase()?a("div",{staticClass:"block block_delete"},[a("span",{staticClass:"block-method block_method_delete block_method_color"},[e._v("DELETE")]),e._v(" "),a("span",{staticClass:"block-method block_url"},[e._v(e._s(e._f("ellipsis")(t.row.url)))]),e._v(" "),a("span",{staticClass:"block-summary-description"},[e._v(e._s(e._f("str_ellipsis")(t.row.name)))])]):e._e(),e._v(" "),"PATCH"===t.row.method.toUpperCase()?a("div",{staticClass:"block block_patch"},[a("span",{staticClass:"block-method block_method_patch block_method_color"},[e._v("PATCH")]),e._v(" "),a("span",{staticClass:"block-method block_url"},[e._v(e._s(e._f("ellipsis")(t.row.url)))]),e._v(" "),a("span",{staticClass:"block-summary-description"},[e._v(e._s(e._f("str_ellipsis")(t.row.name)))])]):e._e(),e._v(" "),"HEAD"===t.row.method.toUpperCase()?a("div",{staticClass:"block block_head"},[a("span",{staticClass:"block-method block_method_head block_method_color"},[e._v("HEAD")]),e._v(" "),a("span",{staticClass:"block-method block_url"},[e._v(e._s(e._f("ellipsis")(t.row.url)))]),e._v(" "),a("span",{staticClass:"block-summary-description"},[e._v(e._s(e._f("str_ellipsis")(t.row.name)))])]):e._e(),e._v(" "),"OPTIONS"===t.row.method.toUpperCase()?a("div",{staticClass:"block block_options"},[a("span",{staticClass:"block-method block_method_options block_method_color"},[e._v("OPTIONS")]),e._v(" "),a("span",{staticClass:"block-method block_url"},[e._v(e._s(e._f("ellipsis")(t.row.url)))]),e._v(" "),a("span",{staticClass:"block-summary-description"},[e._v(e._s(e._f("str_ellipsis")(t.row.name)))])]):e._e()]}}])}),e._v(" "),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.currentRow===t.row,expression:"currentRow === scope.row"}]},[a("el-button",{attrs:{type:"info",icon:"el-icon-edit",title:"修改 API",circle:"",size:"mini"},on:{click:function(a){e.handleRowClick(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-document",title:"复制 API",circle:"",size:"mini"},on:{click:function(a){e.handleCopyAPI(t.row.id)}}}),e._v(" "),a("el-popover",{staticStyle:{"margin-left":"10px"},attrs:{trigger:"hover"}},[a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-caret-right",title:"运行 API",circle:"",size:"mini"},on:{click:function(a){e.handleRunAPI(t.row.id)}}}),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",title:"删除 API",circle:"",size:"mini"},on:{click:function(a){e.handleDelApi(t.row.id)}}})],1),e._v(" "),a("el-button",{attrs:{slot:"reference",icon:"el-icon-more",title:"更多",circle:"",size:"mini"},slot:"reference"})],1)],1)]}}])})],1)],1)],1)],1)],1)},staticRenderFns:[]};var te={watch:{filterText:function(e){this.$refs.tree2.filter(e)}},components:{ApiBody:W,ApiList:a("VU/8")(Q,ee,!1,function(e){a("fsJM")},"data-v-66943db0",null).exports},computed:{initResponse:{get:function(){return this.addAPIFlag},set:function(e){this.addAPIFlag=e,this.response={id:"",body:{name:"",times:1,url:"",method:"POST",header:[{key:"",value:"",desc:""}],request:{data:[{key:"",value:"",desc:"",type:1}],params:[{key:"",value:"",desc:"",type:1}],json_data:""},validate:[{expect:"",actual:"",comparator:"equals",type:1}],variables:[{key:"",value:"",desc:"",type:1}],extract:[{key:"",value:"",desc:""}],hooks:[{setup:"",teardown:""}]}}}}},data:function(){return{configOptions:[],hostOptions:[],currentConfig:"请选择",currentHost:"请选择",back:!1,del:!1,run:!1,move:!1,response:"",nodeForm:{name:""},rules:{name:[{required:!0,message:"请输入节点名称",trigger:"blur"},{min:1,max:50,message:"最多不超过50个字符",trigger:"blur"}]},radio:"根节点",addAPIFlag:!1,treeId:"",maxId:"",dialogVisible:!1,currentNode:"",data:"",filterText:"",expand:"&#xe65f;",dataTree:[],isSelectAPI:!1}},methods:{handleDragEnd:function(){this.updateTree(!1)},handleAddSuccess:function(){this.back=!this.back,this.addAPIFlag=!1},handleAPI:function(e){this.addAPIFlag=!0,this.response=e},getTree:function(){var e=this;this.$api.getTree(this.$route.params.id,{params:{type:1}}).then(function(t){e.dataTree=t.tree,e.treeId=t.id,e.maxId=t.max})},getConfig:function(){var e=this;this.$api.getAllConfig(this.$route.params.id).then(function(t){e.configOptions=t,e.configOptions.push({name:"请选择"})})},getHost:function(){var e=this;this.$api.getAllHost(this.$route.params.id).then(function(t){e.hostOptions=t,e.hostOptions.push({name:"请选择"})})},updateTree:function(e){var t=this;this.$api.updateTree(this.treeId,{body:this.dataTree,node:this.currentNode.id,mode:e,type:1}).then(function(e){e.success?(t.dataTree=e.tree,t.maxId=e.max):t.$message.error(e.msg)})},deleteNode:function(){var e=this;this.$confirm("此操作将永久删除该节点下所有接口, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){""===e.currentNode?e.$message.info("请选择一个节点"):0!==e.currentNode.children.length?e.$message.warning("此节点有子节点，不可删除！"):(e.remove(e.currentNode,e.data),e.updateTree(!0))})},renameNode:function(){var e=this;this.$prompt("请输入节点名","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"节点名称不能为空"}).then(function(t){var a=t.value,n=e.data.parent,i=n.data.children||n.data;i[i.findIndex(function(t){return t.id===e.currentNode.id})].label=a,e.updateTree(!1)})},handleConfirm:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.append(t.currentNode),t.updateTree(!1),t.dialogVisible=!1,t.nodeForm.name="")})},handleNodeClick:function(e,t){this.addAPIFlag=!1,this.currentNode=e,this.data=t},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},remove:function(e,t){var a=t.parent,n=a.data.children||a.data,i=n.findIndex(function(t){return t.id===e.id});n.splice(i,1)},append:function(e){var t={id:++this.maxId,label:this.nodeForm.name,children:[]};""!==e&&0!==this.dataTree.length&&"根节点"!==this.radio?(e.children||this.$set(e,"children",[]),e.children.push(t)):this.dataTree.push(t)}},name:"RecordApi",mounted:function(){this.getTree(),this.getConfig(),this.getHost()}},ae={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{background:"#fff",padding:"0"}},[a("div",{staticClass:"nav-api-header"},[a("div",{staticStyle:{"padding-top":"10px","margin-left":"10px"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("\n                    新建分组\n                ")]),e._v(" "),a("el-dialog",{attrs:{title:"新建分组",visible:e.dialogVisible,width:"30%",align:"center"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"nodeForm",staticClass:"project",attrs:{model:e.nodeForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"节点名称",prop:"name"}},[a("el-input",{model:{value:e.nodeForm.name,callback:function(t){e.$set(e.nodeForm,"name",t)},expression:"nodeForm.name"}})],1)],1),e._v(" "),a("el-radio-group",{attrs:{size:"small"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[a("el-radio-button",{attrs:{label:"根节点"}}),e._v(" "),a("el-radio-button",{attrs:{label:"子节点"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleConfirm("nodeForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-button",{attrs:{disabled:""===e.currentNode,type:"danger",size:"small",icon:"el-icon-delete"},on:{click:e.deleteNode}},[e._v("删除分组\n                ")]),e._v(" "),a("el-button",{attrs:{disabled:""===e.currentNode,type:"info",size:"small",icon:"el-icon-edit-outline"},on:{click:e.renameNode}},[e._v("重命名\n                ")]),e._v(" "),a("el-button",{attrs:{disabled:""===e.currentNode,type:"primary",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.initResponse=!0}}},[e._v("添加接口\n                ")]),e._v("\n                 环境:\n                "),a("el-select",{attrs:{placeholder:"请选择",size:"small",tyle:"margin-left: -6px"},model:{value:e.currentHost,callback:function(t){e.currentHost=t},expression:"currentHost"}},e._l(e.hostOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),e._v("\n                 配置:\n                "),a("el-select",{attrs:{placeholder:"请选择",size:"small",tyle:"margin-left: -6px"},model:{value:e.currentConfig,callback:function(t){e.currentConfig=t},expression:"currentConfig"}},e._l(e.configOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),e._v(" "),e.addAPIFlag?e._e():a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",icon:"el-icon-caret-right",size:"mini"},on:{click:function(t){e.run=!e.run}}},[e._v("批量运行")]),e._v(" "),e.addAPIFlag?e._e():a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{disabled:!e.isSelectAPI,type:"success",icon:"el-icon-smoking",size:"mini"},on:{click:function(t){e.move=!e.move}}},[e._v("移动 API")]),e._v(" "),e.addAPIFlag?e._e():a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(t){e.del=!e.del}}},[e._v("批量删除")])],1)])]),e._v(" "),a("el-container",[a("el-aside",{staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"nav-api-side"},[a("div",{staticClass:"api-tree"},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤",size:"medium",clearable:"","prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree2",attrs:{data:e.dataTree,"node-key":"id","default-expand-all":!1,"expand-on-click-node":!1,draggable:"","highlight-current":"","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick,"node-drag-end":e.handleDragEnd},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node;return t.data,a("span",{staticClass:"custom-tree-node"},[a("span",[a("i",{staticClass:"iconfont",domProps:{innerHTML:e._s(e.expand)}}),e._v("  "+e._s(n.label))])])}}])})],1)])]),e._v(" "),a("el-main",{staticStyle:{padding:"0"}},[a("api-body",{directives:[{name:"show",rawName:"v-show",value:e.addAPIFlag,expression:"addAPIFlag"}],attrs:{nodeId:e.currentNode.id,project:e.$route.params.id,response:e.response,config:e.currentConfig,host:e.currentHost},on:{addSuccess:e.handleAddSuccess}}),e._v(" "),a("api-list",{directives:[{name:"show",rawName:"v-show",value:!e.addAPIFlag,expression:"!addAPIFlag"}],attrs:{node:""!==e.currentNode?e.currentNode.id:"",project:e.$route.params.id,config:e.currentConfig,host:e.currentHost,del:e.del,move:e.move,back:e.back,isSelectAPI:e.isSelectAPI,run:e.run},on:{api:e.handleAPI,"update:isSelectAPI":function(t){e.isSelectAPI=t}}})],1)],1)],1)},staticRenderFns:[]};var ne=a("VU/8")(te,ae,!1,function(e){a("r5ks")},"data-v-db495426",null).exports,ie=a("mvHQ"),se=a.n(ie),re=a("w/TU"),oe=a.n(re),le={components:{Headers:I,Request:V,Extract:L,Validate:B,Variables:H,Hooks:J,Report:Z},props:{response:{require:!0},host:{require:!0}},methods:{handleHeader:function(e,t){this.header=t,this.tempBody.header=e},handleRequest:function(e,t){this.request=t,this.tempBody.request=e},handleValidate:function(e,t){this.validate=t,this.tempBody.validate=e},handleExtract:function(e,t){this.extract=t,this.tempBody.extract=e},handleVariables:function(e,t){this.variables=t,this.tempBody.variables=e},handleHooks:function(e,t){if(this.hooks=t,this.tempBody.hooks=e,this.tempBody.url=this.url,this.tempBody.method=this.method,this.tempBody.name=this.name,this.tempBody.times=this.times,this.validateData()){var a={header:this.header,request:this.request,extract:this.extract,validate:this.validate,variables:this.variables,hooks:this.hooks,url:this.url,method:this.method,name:this.name,times:this.times};this.$emit("getNewBody",a,this.tempBody),this.run=!1}},validateData:function(){return""===this.url?(this.$notify.error({title:"url错误",message:"接口请求地址不能为空",duration:1500}),!1):""!==this.name||(this.$notify.error({title:"name错误",message:"接口名称不能为空",duration:1500}),!1)}},watch:{esc:function(){this.$emit("escEdit")}},data:function(){return{loading:!1,run:!1,esc:!1,times:this.response.body.times,name:this.response.body.name,url:this.response.body.url,header:[],request:[],extract:[],validate:[],variables:[],hooks:[],tempBody:{},method:this.response.body.method,save:!1,summary:{},dialogTableVisible:!1,activeTag:"second",httpOptions:[{label:"GET"},{label:"POST"},{label:"PUT"},{label:"DELETE"},{label:"HEAD"},{label:"OPTIONS"},{label:"PATCH"}]}},name:"TestBody",mounted:function(){this.header=this.response.body.header,this.request=this.response.body.request,this.extract=this.response.body.extract,this.validate=this.response.body.validate,this.variables=this.response.body.variables,this.hooks=this.response.body.hooks}},ce={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",[a("el-input",{staticStyle:{width:"600px"},attrs:{placeholder:"请输入接口名称",clearable:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[a("template",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("接口信息录入")]),e._v(" "),a("el-button",{attrs:{slot:"append",type:"success",plain:""},on:{click:function(t){e.save=!e.save}},slot:"append"},[e._v("Save\n                ")])],2),e._v(" "),a("el-button",{attrs:{slot:"append",type:"danger"},on:{click:function(t){e.esc=!e.esc}},slot:"append"},[e._v("Back\n            ")])],1),e._v(" "),a("div",[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入接口请求地址",clearable:""},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}},[a("el-select",{attrs:{slot:"prepend",size:"small"},slot:"prepend",model:{value:e.method,callback:function(t){e.method=t},expression:"method"}},e._l(e.httpOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})}))],1),e._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:"循环次数",placement:"bottom"}},[a("el-input-number",{staticStyle:{width:"120px"},attrs:{"controls-position":"right",min:1,max:100},model:{value:e.times,callback:function(t){e.times=t},expression:"times"}})],1)],1),e._v(" "),e.dialogTableVisible?a("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"70%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("report",{attrs:{summary:e.summary}})],1):e._e()],1),e._v(" "),a("div",{staticClass:"request"},[a("el-tabs",{staticStyle:{"margin-left":"20px"},model:{value:e.activeTag,callback:function(t){e.activeTag=t},expression:"activeTag"}},[a("el-tab-pane",{attrs:{label:"Header",name:"first"}},[a("headers",{attrs:{save:e.save,header:e.header},on:{header:e.handleHeader}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Request",name:"second"}},[a("request",{attrs:{save:e.save,request:e.request},on:{request:e.handleRequest}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Extract",name:"third"}},[a("extract",{attrs:{save:e.save,extract:e.extract},on:{extract:e.handleExtract}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Validate",name:"fourth"}},[a("validate",{attrs:{save:e.save,validate:e.validate},on:{validate:e.handleValidate}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Variables",name:"five"}},[a("variables",{attrs:{save:e.save,variables:e.variables},on:{variables:e.handleVariables}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Hooks",name:"six"}},[a("hooks",{attrs:{save:e.save,hooks:e.hooks},on:{hooks:e.handleHooks}})],1)],1)],1)])},staticRenderFns:[]};var ue=a("VU/8")(le,ce,!1,function(e){a("N02b")},"data-v-5200eb5a",null).exports,de={filters:{ellipsis:function(e){return e?e.length>40?e.slice(0,40)+"......":e:""},str_ellipsis:function(e){return e?e.length>10?e.slice(0,10)+"......":e:""}},components:{draggable:oe.a,HttpRunner:ue,Report:Z},computed:{isConfigExist:{get:function(){return this.testData.length>0&&"config"===this.testData[0].body.method&&"请选择"!==this.testData[0].body.name}}},props:{host:{require:!0},config:{require:!0},project:{require:!0},node:{require:!0},testStepResp:{require:!1},back:Boolean},name:"EditTest",watch:{config:function(){var e={body:{name:this.config,method:"config"}};0!==this.testData.length&&"config"===this.testData[0].body.method||"请选择"===this.config?"请选择"!==this.config&&this.testData.splice(0,1,e):this.testData.splice(0,0,e)},back:function(){this.editTestStepActivate=!1},filterText:function(e){this.$refs.tree2.filter(e)},testStepResp:function(){try{this.testName=this.testStepResp.case.name,this.testId=this.testStepResp.case.id,this.testTag=this.testStepResp.case.tag,this.relation=this.testStepResp.case.relation,this.testData=JSON.parse(se()(this.testStepResp.step))}catch(e){this.testName="",this.testId="",this.testTag="集成用例",this.testData=JSON.parse(se()(this.testStepResp))}}},data:function(){return{tagOptions:{1:"冒烟用例",2:"集成用例",3:"监控脚本"},suite_loading:!1,loading:!1,dialogTableVisible:!1,editTestStepActivate:!1,currentPage:1,length:0,testId:"",testName:"",relation:"",testTag:"集成用例",currentTest:"",currentNode:"",currentAPI:"",data:"",filterText:"",expand:"&#xe65f;",dataTree:[],summary:{},apiData:{count:0,results:[]},search:"",testData:[]}},methods:{getAPI:function(){var e=this;this.$api.apiList({params:{node:this.currentNode,project:this.project,search:this.search}}).then(function(t){e.apiData=t})},handleNewBody:function(e,t){this.editTestStepActivate=!1;var a=this.testData[this.currentTest].case,n=this.testData[this.currentTest].id;this.testData[this.currentTest]={body:e,newBody:t,case:a,id:n}},validateData:function(){return""===this.testName||this.testName.length>100?(this.$notify.warning({title:"提示",duration:1e3,message:"用例集名称必填，不能超过100个字符"}),!1):0===this.testData.length?(this.$notify.warning({title:"提示",duration:1e3,message:"测试用例集至少包含一个接口"}),!1):"config"!==this.testData[0].body.method||1!==this.testData.length||(this.$notify.warning({title:"提示",duration:1e3,message:"测试用例集至少包含一个接口"}),!1)},addTestSuite:function(){var e=this,t=this.testData.length;"config"===this.testData[0].body.method&&(t-=1),this.$api.addTestCase({length:t,project:this.project,relation:this.node,name:this.testName,body:this.testData,tag:this.testTag}).then(function(t){t.success?e.$emit("addSuccess"):e.$message({message:t.msg,type:"error",duration:1e3})})},updateTestSuite:function(){var e=this,t=this.testData.length;"config"===this.testData[0].body.method&&(t-=1),this.$api.updateTestCase(this.testId,{length:t,name:this.testName,tag:this.testTag,body:this.testData,project:this.project,relation:this.relation}).then(function(t){t.success?e.$emit("addSuccess"):e.$message({message:t.msg,type:"error",duration:1e3})})},handleClickSave:function(){this.validateData()&&(""===this.testId?this.addTestSuite():this.updateTestSuite())},handleClickRun:function(){var e=this;this.validateData()&&(this.suite_loading=!0,this.$api.runSingleTestSuite({host:this.host,name:this.testName,body:this.testData,project:this.project}).then(function(t){e.suite_loading=!1,e.summary=t,e.dialogTableVisible=!0}).catch(function(t){e.suite_loading=!1}))},handleSingleRun:function(){var e=this;this.loading=!0;var t=null;this.testData.length>0&&"config"===this.testData[0].body.method&&(t=this.testData[0].body),this.$api.runSingleTest({host:this.host,config:t,body:this.testData[this.currentTest],project:this.project}).then(function(t){e.loading=!1,e.summary=t,e.dialogTableVisible=!0}).catch(function(t){e.loading=!1})},handlePartialRun:function(e){var t=this;this.validateData()&&(this.suite_loading=!0,this.$api.runSingleTestSuite({host:this.host,name:this.testName,body:this.testData.slice(0,e+1),project:this.project}).then(function(e){t.suite_loading=!1,t.summary=e,t.dialogTableVisible=!0}).catch(function(e){t.suite_loading=!1}))},handlePageChange:function(e){var t=this;this.$api.getPaginationBypage({params:{page:this.currentPage,node:this.currentNode,project:this.project,search:""}}).then(function(e){t.apiData=e})},getAPIList:function(){var e=this;this.$nextTick(function(){e.$api.apiList({params:{node:e.currentNode,project:e.project,search:e.search,rigEnv:e.rigEnv,tag:e.tag}}).then(function(t){e.apiData=t})})},getTree:function(){var e=this;this.$api.getTree(this.$route.params.id,{params:{type:1}}).then(function(t){e.dataTree=t.tree})},handleNodeClick:function(e,t){this.currentNode=e.id,this.data=t,this.getAPIList()},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},dragEnd:function(e){this.testData.length>this.length&&this.testData.splice(this.length,1)},drop:function(e){e.preventDefault(),this.testData.push(this.currentAPI)},allowDrop:function(e){e.preventDefault()}},mounted:function(){this.getTree(),this.getAPIList()}},pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-aside",{staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"nav-api-side"},[a("div",{staticClass:"api-tree"},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤",size:"medium",clearable:"","prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree2",attrs:{data:e.dataTree,"node-key":"id","default-expand-all":!1,"expand-on-click-node":!1,"highlight-current":"","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node;return t.data,a("span",{staticClass:"custom-tree-node"},[a("span",[a("i",{staticClass:"iconfont",domProps:{innerHTML:e._s(e.expand)}}),e._v("  "+e._s(n.label))])])}}])})],1)])]),e._v(" "),a("el-main",[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.editTestStepActivate,expression:"!editTestStepActivate"}]},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"请输入 API 名称",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getAPI},slot:"append"})],1)],1),e._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.apiData.count,expression:"apiData.count !== 0"}],staticStyle:{"margin-top":"5px","text-align":"center"},attrs:{"page-size":11,background:"","current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.apiData.count},on:{"current-change":e.handlePageChange,"update:currentPage":function(t){e.currentPage=t}}})],1),e._v(" "),a("el-col",{attrs:{span:12}},[e.testData.length>0?a("el-input",{staticStyle:{width:"540px","text-align":"center"},attrs:{placeholder:"请输入测试用例名称",clearable:""},model:{value:e.testName,callback:function(t){e.testName=t},expression:"testName"}},[a("el-select",{staticStyle:{width:"105px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.testTag,callback:function(t){e.testTag=t},expression:"testTag"}},e._l(e.tagOptions,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),e._v(" "),a("el-button",{attrs:{slot:"append",type:"success",plain:""},on:{click:e.handleClickSave},slot:"append"},[e._v("Save\n                        ")])],1):e._e(),e._v(" "),a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.suite_loading,expression:"suite_loading"}],attrs:{type:"primary"},on:{click:e.handleClickRun}},[e._v("Send\n                    ")])],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.editTestStepActivate,expression:"!editTestStepActivate"}],staticStyle:{"margin-top":"10px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},e._l(e.apiData.results,function(t,n){return a("div",{key:n,staticStyle:{cursor:"pointer","margin-top":"10px",overflow:"auto"},attrs:{draggable:"true"},on:{dragstart:function(a){e.currentAPI=JSON.parse(JSON.stringify(t))}}},["POST"===t.method.toUpperCase()?a("div",{staticClass:"block block_post"},[a("span",{staticClass:"block-method block_method_post block_method_color"},[e._v("POST")]),e._v(" "),a("span",{staticClass:"block-method block_url"},[e._v(e._s(e._f("ellipsis")(t.url)))]),e._v(" "),a("span",{staticClass:"block-summary-description"},[e._v(e._s(e._f("str_ellipsis")(t.name)))])]):e._e(),e._v(" "),"GET"===t.method.toUpperCase()?a("div",{staticClass:"block block_get"},[a("span",{staticClass:"block-method block_method_get block_method_color"},[e._v("GET")]),e._v(" "),a("span",{staticClass:"block-method block_url"},[e._v(e._s(e._f("ellipsis")(t.url)))]),e._v(" "),a("span",{staticClass:"block-summary-description"},[e._v(e._s(e._f("str_ellipsis")(t.name)))])]):e._e(),e._v(" "),"PUT"===t.method.toUpperCase()?a("div",{staticClass:"block block_put"},[a("span",{staticClass:"block-method block_method_put block_method_color"},[e._v("PUT")]),e._v(" "),a("span",{staticClass:"block-method block_url"},[e._v(e._s(e._f("ellipsis")(t.url)))]),e._v(" "),a("span",{staticClass:"block-summary-description"},[e._v(e._s(e._f("str_ellipsis")(t.name)))])]):e._e(),e._v(" "),"DELETE"===t.method.toUpperCase()?a("div",{staticClass:"block block_delete"},[a("span",{staticClass:"block-method block_method_delete block_method_color"},[e._v("DELETE")]),e._v(" "),a("span",{staticClass:"block-method block_url"},[e._v(e._s(e._f("ellipsis")(t.url)))]),e._v(" "),a("span",{staticClass:"block-summary-description"},[e._v(e._s(e._f("str_ellipsis")(t.name)))])]):e._e(),e._v(" "),"PATCH"===t.method.toUpperCase()?a("div",{staticClass:"block block_patch"},[a("span",{staticClass:"block-method block_method_patch block_method_color"},[e._v("PATCH")]),e._v(" "),a("span",{staticClass:"block-method block_url"},[e._v(e._s(e._f("ellipsis")(t.url)))]),e._v(" "),a("span",{staticClass:"block-summary-description"},[e._v(e._s(e._f("str_ellipsis")(t.name)))])]):e._e(),e._v(" "),"HEAD"===t.method.toUpperCase()?a("div",{staticClass:"block block_head"},[a("span",{staticClass:"block-method block_method_head block_method_color"},[e._v("HEAD")]),e._v(" "),a("span",{staticClass:"block-method block_url"},[e._v(e._s(e._f("ellipsis")(t.url)))]),e._v(" "),a("span",{staticClass:"block-summary-description"},[e._v(e._s(e._f("str_ellipsis")(t.name)))])]):e._e(),e._v(" "),"OPTIONS"===t.method.toUpperCase()?a("div",{staticClass:"block block_options"},[a("span",{staticClass:"block-method block_method_options block_method_color"},[e._v("OPTIONS")]),e._v(" "),a("span",{staticClass:"block-method block_url"},[e._v(e._s(e._f("ellipsis")(t.url)))]),e._v(" "),a("span",{staticClass:"block-summary-description"},[e._v(e._s(e._f("str_ellipsis")(t.name)))])]):e._e()])})),e._v(" "),a("el-col",{attrs:{span:12}},[e.dialogTableVisible?a("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"70%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("report",{attrs:{summary:e.summary}})],1):e._e(),e._v(" "),a("div",{staticStyle:{"max-height":"600px",overflow:"auto"},on:{drop:function(t){e.drop(t)},dragover:function(t){e.allowDrop(t)}}},[a("div",{staticClass:"test-list"},[0===e.testData.length?a("span",{staticStyle:{color:"red"}},[e._v("温馨提示："),a("br"),e._v("选择左侧相应API拖拽至此区域组成业务用例"),a("br"),e._v("\n                                上下拖动此区域接口调整接口调用顺序\n                            ")]):e._e(),e._v(" "),e.isConfigExist?a("div",{staticClass:"block block_test",on:{mousemove:function(t){e.currentTest=-1}}},[a("span",{staticClass:"block-method block_method_config block_method_color"},[e._v(e._s(e.testData[0].body.method))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.testData[0].body.name,expression:"testData[0].body.name"}],staticClass:"block-test-name",attrs:{disabled:""},domProps:{value:e.testData[0].body.name},on:{input:function(t){t.target.composing||e.$set(e.testData[0].body,"name",t.target.value)}}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:-1===e.currentTest,expression:"currentTest === -1"}],staticStyle:{position:"absolute",right:"12px",top:"8px"},attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(t){e.testData.splice(e.index,1)}}})],1):e._e(),e._v(" "),a("draggable",{attrs:{options:{animation:200}},on:{end:e.dragEnd,start:function(t){e.length=e.testData.length}},model:{value:e.testData,callback:function(t){e.testData=t},expression:"testData"}},e._l(e.testData,function(t,n){return"config"!==t.body.method?a("div",{key:n,staticClass:"block block_test",on:{mousemove:function(t){e.currentTest=n}}},[a("span",{staticClass:"block-method block_method_test block_method_color"},[e._v("A P I")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.body.name,expression:"test.body.name"}],staticClass:"block-test-name",domProps:{value:t.body.name},on:{input:function(a){a.target.composing||e.$set(t.body,"name",a.target.value)}}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.currentTest===n,expression:"currentTest === index"}],staticStyle:{position:"absolute",right:"120px",top:"8px"},attrs:{type:"info",title:"修改 API",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(t){e.editTestStepActivate=!0}}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.currentTest===n,expression:"currentTest === index"}],staticStyle:{position:"absolute",right:"83px",top:"8px"},attrs:{title:"运行 API",type:"success",icon:"el-icon-caret-right",circle:"",size:"mini"},on:{click:e.handleSingleRun}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.currentTest===n,expression:"currentTest === index"}],staticStyle:{position:"absolute",right:"48px",top:"8px"},attrs:{type:"primary",icon:"el-icon-caret-right",circle:"",size:"mini",title:"运行开始到当前位置的所有 API"},on:{click:function(t){e.handlePartialRun(n)}}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.currentTest===n,expression:"currentTest === index"}],staticStyle:{position:"absolute",right:"12px",top:"8px"},attrs:{type:"danger",title:"移除 API",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(t){e.testData.splice(n,1)}}})],1):e._e()}))],1)])],1)],1)],1),e._v(" "),e.editTestStepActivate?a("http-runner",{attrs:{host:e.host,response:e.testData[e.currentTest],config:e.config},on:{escEdit:function(t){e.editTestStepActivate=!1},getNewBody:e.handleNewBody}}):e._e()],1)],1)},staticRenderFns:[]};var he=a("VU/8")(de,pe,!1,function(e){a("V9Yx")},"data-v-c46bf5b4",null).exports,me={name:"TestList",components:{Report:Z},props:{run:Boolean,move:Boolean,back:Boolean,project:{require:!0},host:{require:!0},node:{require:!1},del:Boolean,onlyMe:Boolean,isSelectCase:Boolean},watch:{filterText:function(e){this.$refs.tree.filter(e)},run:function(){this.asyncs=!1,this.reportName="",this.getTree("run")},move:function(){this.getTree("move")},node:function(){this.search="",this.getTestList()},back:function(){this.getTestList()},del:function(){var e=this;0!==this.selectTest.length?this.$confirm("此操作将永久删除测试用例集，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.delAllTest({data:e.selectTest}).then(function(t){e.getTestList()})}):this.$notify.warning({title:"提示",message:"请至少选择一个用例集",duration:1e3})}},data:function(){return{search:"",reportName:"",asyncs:!1,filterText:"",expand:"&#xe65f;",dialogTreeVisible:!1,dataTree:{},loading:!1,dialogTableVisible:!1,dialogTreeMoveCaseVisible:!1,selectTest:[],summary:{},currentRow:"",testData:{count:0,results:[]},currentPage:1}},methods:{getTree:function(e){var t=this;this.$api.getTree(this.$route.params.id,{params:{type:2}}).then(function(a){t.dataTree=a.tree,"run"===e?t.dialogTreeVisible=!0:t.dialogTreeMoveCaseVisible=!0})},resetSearch:function(){this.searchType="1",this.search="",this.node="",this.caseType="",this.$emit("update:onlyMe",!0),this.getTestList()},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},runTree:function(){var e=this;this.dialogTreeVisible=!1;var t=this.$refs.tree.getCheckedKeys();0===t.length?this.$notify.error({title:"提示",message:"请至少选择一个节点",duration:1500}):this.$api.runSuiteTree({host:this.host,project:this.project,relation:t,async:this.asyncs,name:this.reportName}).then(function(t){t.hasOwnProperty("status")?e.$message.info({message:t.msg,duration:1500}):(e.summary=t,e.dialogTableVisible=!0)})},moveCase:function(){var e=this;this.dialogTreeVisible=!1;var t=this.$refs.tree.getCheckedKeys(),a=t.length;0===a?this.$notify.error({title:"提示",message:"请至少选择一个节点",duration:1500}):1!==a?this.$notify.error({title:"提示",message:"API只能移动到一个节点, 现在选了"+a+"个节点",duration:1500}):this.$api.moveCase({project:this.project,relation:t[0],case:this.selectTest}).then(function(t){t.success?(e.$message.success({message:"移动Case成功",duration:1500}),e.dialogTreeMoveCaseVisible=!1,e.resetSearch()):e.$message.error({message:t.msg,duration:1500})})},handleRunTest:function(e,t){var a=this;this.loading=!0,this.$api.runTestByPk(e,{params:{project:this.project,name:t,host:this.host}}).then(function(e){a.summary=e,a.dialogTableVisible=!0,a.loading=!1}).catch(function(e){a.loading=!1})},handleAsyncRunTest:function(e,t){var a=this;this.$api.runTestByPk(e,{params:{project:this.project,name:t,host:this.host,async:!0}}).then(function(e){e.success?a.$message.info({title:"提示",message:e.msg,duration:2e3,center:!0}):a.$message.error({message:e.msg,duration:2e3,center:!0})})},handleSyncCaseStep:function(e){var t=this;this.$confirm("同步 API 至用例中，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$api.syncTest(e).then(function(e){e.success?(t.$notify.success("API 同步至用例步骤成功"),t.getTestList()):t.$message.error(e.msg)})})},handleCurrentChange:function(e){var t=this;this.$api.getTestPaginationBypage({params:{page:this.currentPage,project:this.project,node:this.node,search:this.search}}).then(function(e){t.testData=e})},handleEditTest:function(e){var t=this;this.$api.editTest(e).then(function(e){t.$emit("testStep",e)})},handleCopyTest:function(e){var t=this;this.$prompt("请输入用例集名称","提示",{confirmButtonText:"确定",inputPattern:/^[\s\S]*.*[^\s][\s\S]*$/,inputErrorMessage:"用例集不能为空"}).then(function(a){var n=a.value;t.$api.coptTest(e,{name:n,relation:t.node,project:t.project}).then(function(e){e.success?t.getTestList():t.$message.error(e.msg)})})},handleSelectionChange:function(e){this.selectTest=e,this.selectTest.length>0?this.$emit("update:isSelectCase",!0):this.$emit("update:isSelectCase",!1)},handleDelTest:function(e){var t=this;this.$confirm("此操作将永久删除该测试用例集，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$api.deleteTest(e).then(function(e){e.success?t.getTestList():t.$message.error(e.msg)})})},getTestList:function(){var e=this;this.$api.testList({params:{project:this.project,node:this.node,search:this.search}}).then(function(t){e.testData=t})},cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""}},mounted:function(){this.getTestList()}},fe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{"padding-top":"10px",height:"50px"}},[a("div",{staticStyle:{overflow:"hidden"}},[a("el-row",{attrs:{gutter:50}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入用例名称",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getTestList},slot:"append"})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.testData.count,expression:"testData.count !== 0 "}],attrs:{"current-page":e.currentPage,"page-size":11,background:"",layout:"total, prev, pager, next, jumper",total:e.testData.count},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)],1)],1)]),e._v(" "),a("el-container",[a("el-main",{staticStyle:{padding:"0","margin-left":"10px"}},[a("div",{staticStyle:{position:"fixed",bottom:"0",right:"0",left:"500px",top:"160px"}},[e.dialogTableVisible?a("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"70%","modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("report",{attrs:{summary:e.summary}})],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"Run Case",visible:e.dialogTreeVisible,width:"45%","modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogTreeVisible=t}}},[a("div",[a("div",[a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:8}},[a("el-switch",{staticStyle:{"margin-top":"10px"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"异步执行","inactive-text":"同步执行"},model:{value:e.asyncs,callback:function(t){e.asyncs=t},expression:"asyncs"}})],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.asyncs,expression:"asyncs"}],attrs:{clearable:"",placeholder:"请输入报告名称",disabled:!1},model:{value:e.reportName,callback:function(t){e.reportName=t},expression:"reportName"}})],1)],1)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤",size:"medium",clearable:"","prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree",attrs:{"filter-node-method":e.filterNode,data:e.dataTree,"show-checkbox":"","node-key":"id","expand-on-click-node":!1,"check-on-click-node":"","check-strictly":!0,"highlight-current":!0},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node;return t.data,a("span",{staticClass:"custom-tree-node"},[a("span",[a("i",{staticClass:"iconfont",domProps:{innerHTML:e._s(e.expand)}}),e._v("  "+e._s(n.label))])])}}])})],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTreeVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.runTree}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"Move Case",visible:e.dialogTreeMoveCaseVisible,width:"45%","modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogTreeMoveCaseVisible=t}}},[a("div",[a("div",{staticStyle:{"margin-top":"20px"}},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤",size:"medium",clearable:"","prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree",attrs:{"filter-node-method":e.filterNode,data:e.dataTree,"show-checkbox":"","node-key":"id","expand-on-click-node":!1,"check-on-click-node":"","check-strictly":!0,"highlight-current":!0},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node;return t.data,a("span",{staticClass:"custom-tree-node"},[a("span",[a("i",{staticClass:"iconfont",domProps:{innerHTML:e._s(e.expand)}}),e._v("  "+e._s(n.label))])])}}])})],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTreeMoveCaseVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.moveCase}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",attrs:{"highlight-current-row":"",data:e.testData.results,"show-header":0!==e.testData.count,stripe:"",height:"calc(100%)"},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"用例名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"API个数"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.length)+" 个")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"用例类型"},scopedSlots:e._u([{key:"default",fn:function(t){return["冒烟用例"===t.row.tag?a("el-tag",[e._v(e._s(t.row.tag))]):e._e(),e._v(" "),"集成用例"===t.row.tag?a("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.row.tag))]):e._e(),e._v(" "),"监控脚本"===t.row.tag?a("el-tag",{attrs:{type:"danger"}},[e._v(e._s(t.row.tag))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"更新时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("datetimeFormat")(t.row.update_time)))])]}}])}),e._v(" "),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.currentRow===t.row,expression:"currentRow === scope.row"}]},[a("el-button",{attrs:{type:"info",icon:"el-icon-edit",title:"修改 CASE",circle:"",size:"mini"},on:{click:function(a){e.handleEditTest(t.row.id)}}}),e._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-document",title:"复制 CASE",circle:"",size:"mini"},on:{click:function(a){e.handleCopyTest(t.row.id)}}}),e._v(" "),a("el-popover",{staticStyle:{"margin-left":"10px"},attrs:{trigger:"hover"}},[a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-caret-right",title:"运行 CASE",circle:"",size:"mini"},on:{click:function(a){e.handleRunTest(t.row.id,t.row.name)}}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-video-play",circle:"",size:"mini",title:"异步运行 CASE"},on:{click:function(a){e.handleAsyncRunTest(t.row.id,t.row.name,t.row.relation)}}}),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",title:"删除 CASE",circle:"",size:"mini"},on:{click:function(a){e.handleDelTest(t.row.id)}}})],1),e._v(" "),a("el-button",{attrs:{slot:"reference",icon:"el-icon-more",title:"更多",circle:"",size:"mini"},slot:"reference"})],1)],1)]}}])})],1)],1)])],1)],1)},staticRenderFns:[]};var ve={computed:{buttonActivate:{get:function(){return!this.addTestActivate||""===this.currentNode},set:function(e){this.addTestActivate=e,this.testStepResp=[]}}},watch:{filterText:function(e){this.$refs.tree2.filter(e)}},components:{EditTest:he,TestList:a("VU/8")(me,fe,!1,function(e){a("8/ux")},"data-v-0389076a",null).exports},data:function(){return{testStepResp:[],nodeForm:{name:""},rules:{name:[{required:!0,message:"请输入节点名称",trigger:"blur"},{min:1,max:50,message:"最多不超过50个字符",trigger:"blur"}]},hostOptions:[],back:!1,del:!1,run:!1,radio:"根节点",addTestActivate:!0,currentConfig:"请选择",currentHost:"请选择",treeId:"",maxId:"",dialogVisible:!1,currentNode:"",data:"",filterText:"",expand:"&#xe65f;",dataTree:[],configOptions:[],move:!1,onlyMe:!0,isSelectCase:!1}},methods:{handleDragEnd:function(){this.updateTree(!1)},getConfig:function(){var e=this;this.$api.getAllConfig(this.$route.params.id).then(function(t){e.configOptions=t,e.configOptions.push({name:"请选择"})})},handleBackList:function(){this.addTestActivate=!0,this.back=!this.back},handleTestStep:function(e){this.testStepResp=e,this.addTestActivate=!1},getTree:function(){var e=this;this.$api.getTree(this.$route.params.id,{params:{type:2}}).then(function(t){e.dataTree=t.tree,e.treeId=t.id,e.maxId=t.max})},updateTree:function(e){var t=this;this.$api.updateTree(this.treeId,{mode:e,body:this.dataTree,node:this.currentNode.id,type:2}).then(function(e){e.success?(t.dataTree=e.tree,t.maxId=e.max):t.$message.error(e.msg)})},renameNode:function(){var e=this;this.$prompt("请输入节点名","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"节点名称不能为空"}).then(function(t){var a=t.value,n=e.data.parent,i=n.data.children||n.data;i[i.findIndex(function(t){return t.id===e.currentNode.id})].label=a,e.updateTree(!1)})},deleteNode:function(){var e=this;this.$confirm("此操作将永久删除该节点下所有用例, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){""===e.currentNode?e.$message.info("请选择一个节点"):0!==e.currentNode.children.length?e.$message.warning("此节点有子节点，不可删除！"):(e.remove(e.currentNode,e.data),e.updateTree(!0))})},handleConfirm:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.append(t.currentNode),t.updateTree(!1),t.dialogVisible=!1,t.nodeForm.name="")})},handleNodeClick:function(e,t){this.currentNode=e,this.data=t},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},remove:function(e,t){var a=t.parent,n=a.data.children||a.data,i=n.findIndex(function(t){return t.id===e.id});n.splice(i,1)},append:function(e){var t={id:++this.maxId,label:this.nodeForm.name,children:[]};""!==e&&0!==this.dataTree.length&&"根节点"!==this.radio?(e.children||this.$set(e,"children",[]),e.children.push(t)):this.dataTree.push(t)},getHost:function(){var e=this;this.$api.getAllHost(this.$route.params.id).then(function(t){e.hostOptions=t,e.hostOptions.push({name:"请选择"})})}},name:"AutoTest",mounted:function(){this.getTree(),this.getConfig(),this.getHost()}},ge={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{background:"#fff",padding:"0",height:"50px"}},[a("div",{staticClass:"nav-api-header"},[a("div",{staticStyle:{"padding-top":"10px","margin-left":"10px"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus",disabled:!e.addTestActivate},on:{click:function(t){e.dialogVisible=!0}}},[e._v("\n                    新建分组\n                ")]),e._v(" "),a("el-dialog",{attrs:{title:"新建分组",visible:e.dialogVisible,width:"30%",align:"center"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"nodeForm",staticClass:"project",attrs:{model:e.nodeForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"节点名称",prop:"name"}},[a("el-input",{model:{value:e.nodeForm.name,callback:function(t){e.$set(e.nodeForm,"name",t)},expression:"nodeForm.name"}})],1)],1),e._v(" "),a("el-radio-group",{attrs:{size:"small"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[a("el-radio-button",{attrs:{label:"根节点"}}),e._v(" "),a("el-radio-button",{attrs:{label:"子节点"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleConfirm("nodeForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",disabled:e.buttonActivate},on:{click:e.deleteNode}},[e._v("删除分组\n                ")]),e._v(" "),a("el-button",{attrs:{disabled:""===e.currentNode,type:"info",size:"small",icon:"el-icon-edit-outline"},on:{click:e.renameNode}},[e._v("重命名\n                ")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus-outline",disabled:e.buttonActivate},on:{click:function(t){e.buttonActivate=!1}}},[e._v("添加用例\n                ")]),e._v("\n                 环境:\n                "),a("el-select",{attrs:{placeholder:"请选择",size:"small",tyle:"margin-left: -6px"},model:{value:e.currentHost,callback:function(t){e.currentHost=t},expression:"currentHost"}},e._l(e.hostOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),e._v("\n                 配置:\n                "),a("el-select",{attrs:{placeholder:"请选择",size:"small",tyle:"margin-left: -6px",disabled:e.addTestActivate},model:{value:e.currentConfig,callback:function(t){e.currentConfig=t},expression:"currentConfig"}},e._l(e.configOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),e._v(" "),e.addTestActivate?a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",icon:"el-icon-caret-right",size:"mini"},on:{click:function(t){e.run=!e.run}}},[e._v("批量运行")]):e._e(),e._v(" "),e.addTestActivate?a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{disabled:!e.isSelectCase,icon:"el-icon-smoking",type:"success",size:"mini"},on:{click:function(t){e.move=!e.move}}},[e._v("移动用例")]):e._e(),e._v(" "),e.addTestActivate?a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(t){e.del=!e.del}}},[e._v("批量删除")]):e._e(),e._v(" "),a("el-button",{staticStyle:{position:"absolute",right:"30px"},attrs:{disabled:e.addTestActivate,type:"text"},on:{click:e.handleBackList}},[e._v("返回列表\n                ")])],1)])]),e._v(" "),a("el-container",[a("el-aside",{directives:[{name:"show",rawName:"v-show",value:e.addTestActivate,expression:"addTestActivate"}],staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"nav-api-side"},[a("div",{staticClass:"api-tree"},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤",size:"medium",clearable:"","prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree2",attrs:{data:e.dataTree,"node-key":"id","default-expand-all":!1,"expand-on-click-node":!1,draggable:"","highlight-current":"","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick,"node-drag-end":e.handleDragEnd},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node;return t.data,a("span",{staticClass:"custom-tree-node"},[a("span",[a("i",{staticClass:"iconfont",domProps:{innerHTML:e._s(e.expand)}}),e._v("  "+e._s(n.label))])])}}])})],1)])]),e._v(" "),a("el-main",{staticStyle:{padding:"0"}},[a("test-list",{directives:[{name:"show",rawName:"v-show",value:e.addTestActivate,expression:"addTestActivate"}],attrs:{project:e.$route.params.id,node:""!==e.currentNode?e.currentNode.id:"",del:e.del,move:e.move,isSelectCase:e.isSelectCase,back:e.back,run:e.run,host:e.currentHost},on:{"update:isSelectCase":function(t){e.isSelectCase=t},testStep:e.handleTestStep}}),e._v(" "),a("edit-test",{directives:[{name:"show",rawName:"v-show",value:!e.addTestActivate,expression:"!addTestActivate"}],attrs:{back:e.back,project:e.$route.params.id,node:e.currentNode.id,testStepResp:e.testStepResp,config:e.currentConfig,host:e.currentHost},on:{addSuccess:e.handleBackList}})],1)],1)],1)},staticRenderFns:[]};var be=a("VU/8")(ve,ge,!1,function(e){a("6423")},"data-v-254ff3a9",null).exports,_e={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{background:"#fff",padding:"0",height:"50px"}},[a("div",{staticClass:"nav-api-header"},[a("div",{staticStyle:{"padding-top":"10px","margin-left":"30px"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("新增变量\n                ")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==e.variablesData.count,expression:"variablesData.count !== 0 "}],staticStyle:{"margin-left":"20px"},attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:e.delSelectionVariables}},[e._v("批量删除")]),e._v(" "),a("el-dialog",{attrs:{title:"添加变量",visible:e.dialogVisible,width:"30%",align:"center"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"variablesForm",staticClass:"project",attrs:{model:e.variablesForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"变量名",prop:"key"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入变量名"},model:{value:e.variablesForm.key,callback:function(t){e.$set(e.variablesForm,"key",t)},expression:"variablesForm.key"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"变量值",prop:"value"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入变量值"},model:{value:e.variablesForm.value,callback:function(t){e.$set(e.variablesForm,"value",t)},expression:"variablesForm.value"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"变量描述",prop:"description"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入变量描述"},model:{value:e.variablesForm.description,callback:function(t){e.$set(e.variablesForm,"description",t)},expression:"variablesForm.description"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleConfirm("variablesForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑变量",visible:e.editdialogVisible,width:"30%",align:"center"},on:{"update:visible":function(t){e.editdialogVisible=t}}},[a("el-form",{ref:"editVariablesForm",staticClass:"project",attrs:{model:e.editVariablesForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"变量名",prop:"key"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入变量名"},model:{value:e.editVariablesForm.key,callback:function(t){e.$set(e.editVariablesForm,"key",t)},expression:"editVariablesForm.key"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"变量值",prop:"value"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入变量值"},model:{value:e.editVariablesForm.value,callback:function(t){e.$set(e.editVariablesForm,"value",t)},expression:"editVariablesForm.value"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"变量描述",prop:"description"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入变量描述"},model:{value:e.editVariablesForm.description,callback:function(t){e.$set(e.editVariablesForm,"description",t)},expression:"editVariablesForm.description"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editdialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleEditConfirm("editVariablesForm")}}},[e._v("确 定")])],1)],1)],1)])]),e._v(" "),a("el-container",[a("el-header",{staticStyle:{padding:"0",height:"50px"}},[a("div",{staticStyle:{"padding-top":"20px","padding-left":"30px",overflow:"hidden"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入变量名称",clearable:"",size:"small"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getVariablesList},slot:"append"})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.variablesData.count,expression:"variablesData.count !== 0 "}],attrs:{"page-size":11,background:"","current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.variablesData.count},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)],1)],1)]),e._v(" "),a("el-container",[a("el-main",{staticStyle:{padding:"0","margin-left":"10px","margin-top":"10px"}},[a("div",{staticStyle:{position:"fixed",bottom:"0",right:"0",left:"220px",top:"170px"}},[a("el-table",{attrs:{"highlight-current-row":"",data:e.variablesData.results,"show-header":0!==e.variablesData.results.length,stripe:"",height:"calc(100%)"},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"变量名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.key))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"变量值"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.value))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"变量描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.description))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"更新时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("datetimeFormat")(t.row.update_time)))])]}}])}),e._v(" "),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.currentRow===t.row,expression:"currentRow === scope.row"}]},[a("el-button",{attrs:{type:"info",title:"修改变量",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(a){e.handleEditVariables(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-document-copy",title:"复制",circle:"",size:"mini"},on:{click:function(a){e.handleCopyVariables(t.row)}}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==e.variablesData.count,expression:"variablesData.count !== 0"}],attrs:{type:"danger",title:"删除变量",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(a){e.handleDelVariables(t.row.id)}}})],1)]}}])})],1)],1)])],1)],1)],1)},staticRenderFns:[]};var ye=a("VU/8")({data:function(){return{search:"",selectVariables:[],currentRow:"",currentPage:1,variablesData:{count:0,results:[]},editdialogVisible:!1,dialogVisible:!1,variablesForm:{key:"",value:"",description:"",project:this.$route.params.id},editVariablesForm:{key:"",value:"",description:"",id:""},rules:{key:[{required:!0,message:"请输入变量名",trigger:"blur"},{min:1,max:100,message:"最多不超过100个字符",trigger:"blur"}],value:[{required:!0,message:"请输入变量值",trigger:"blur"},{min:1,max:1024,message:"最多不超过1024个字符",trigger:"blur"}],description:[{required:!0,message:"请输入变量描述",trigger:"blur"},{min:1,max:1024,message:"最多不超过1024个字符",trigger:"blur"}]}}},methods:{cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""},handleCopyVariables:function(e){this.dialogVisible=!0,this.variablesForm.key=e.key,this.variablesForm.value=e.value,this.variablesForm.description=e.description},handleEditVariables:function(e){this.editVariablesForm={key:e.key,value:e.value,description:e.description,id:e.id},this.editdialogVisible=!0},handleDelVariables:function(e){var t=this;this.$confirm("此操作将永久删除该全局变量，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$api.deleteVariables(e).then(function(e){e.success?t.getVariablesList():t.$message.error(e.msg)})})},handleSelectionChange:function(e){this.selectVariables=e},handleCurrentChange:function(e){var t=this;this.$api.getVariablesPaginationBypage({params:{page:this.currentPage,project:this.variablesForm.project,search:this.search}}).then(function(e){t.variablesData=e})},delSelectionVariables:function(){var e=this;0!==this.selectVariables.length?this.$confirm("此操作将永久删除勾选的全局变量，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.delAllVariabels({data:e.selectVariables}).then(function(t){e.getVariablesList()})}):this.$notify.warning({title:"提示",message:"请至少勾选一个全局变量",duration:1e3})},handleConfirm:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.dialogVisible=!1,t.$api.addVariables(t.variablesForm).then(function(e){e.success?(t.variablesForm.key="",t.variablesForm.value="",t.variablesForm.description="",t.getVariablesList()):t.$message.info({message:e.msg,duration:1e3})}))})},handleEditConfirm:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.editdialogVisible=!1,t.$api.updateVariables(t.editVariablesForm.id,t.editVariablesForm).then(function(e){e.success?t.getVariablesList():t.$message.info({message:e.msg,duration:1e3})}))})},getVariablesList:function(){var e=this;this.$api.variablesList({params:{project:this.variablesForm.project,search:this.search}}).then(function(t){e.variablesData=t})}},name:"GlobalEnv",mounted:function(){this.getVariablesList()}},_e,!1,function(e){a("1ZaZ")},null,null).exports,ke={data:function(){return{search:"",selectReports:[],currentRow:"",currentPage:1,reportData:{count:0,results:[]}}},methods:{cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""},handleWatchReports:function(e){window.open(this.$api.baseUrl+"/api/runner/reports/"+e+"/")},handleSelectionChange:function(e){this.selectReports=e},handleCurrentChange:function(e){var t=this;this.$api.getReportsPaginationBypage({params:{page:this.currentPage,project:this.$route.params.id,search:this.search}}).then(function(e){t.reportData=e})},handleDelReports:function(e){var t=this;this.$confirm("此操作将永久删除该测试报告，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$api.deleteReports(e).then(function(e){e.success?t.getReportList():t.$message.error(e.msg)})})},delSelectionReports:function(){var e=this;0!==this.selectReports.length?this.$confirm("此操作将永久删除勾选的测试报告，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.delAllReports({data:e.selectReports}).then(function(t){e.getReportList()})}):this.$notify.warning({title:"提示",message:"请至少勾选一个测试报告",duration:1e3})},getReportList:function(){var e=this;this.$api.reportList({params:{project:this.$route.params.id,search:this.search}}).then(function(t){e.reportData=t})}},name:"ReportList",mounted:function(){this.getReportList()}},we={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{padding:"0",height:"50px","margin-top":"10px"}},[a("div",{staticStyle:{"padding-top":"8px","padding-left":"30px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入报告名称",clearable:"",size:"small"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getReportList},slot:"append"})],1)],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==e.reportData.count,expression:"reportData.count !== 0"}],staticStyle:{"margin-left":"20px"},attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:e.delSelectionReports}},[e._v("批量删除")])],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.reportData.count,expression:"reportData.count !== 0 "}],attrs:{"page-size":11,background:"","current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.reportData.count},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)],1)],1)]),e._v(" "),a("el-container",[a("el-main",{staticStyle:{padding:"0","margin-left":"10px"}},[a("div",{staticStyle:{position:"fixed",bottom:"0",right:"0",left:"220px",top:"120px"}},[a("el-table",{attrs:{"highlight-current-row":"",data:e.reportData.results,"show-header":0!==e.reportData.results.length,stripe:"",height:"calc(100%)"},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"报告类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{staticStyle:{color:"white"},attrs:{color:"#2C3E50"}},[e._v(e._s(t.row.type))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"报告名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"通过状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{class:{pass:t.row.success,fail:!t.row.success},domProps:{textContent:e._s(!0===t.row.success?"Pass":"Fail")}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"测试时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("timestampToTime")(t.row.time.start_at)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"持续时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{domProps:{textContent:e._s(t.row.time.duration.toFixed(3)+" 秒")}})]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"80",label:"总计接口"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",[e._v(e._s(t.row.stat.testsRun))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"80",label:"通过个数"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"success"}},[e._v(" "+e._s(t.row.stat.successes))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"80",label:"失败个数"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"danger"}},[e._v(e._s(t.row.stat.failures))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"80",label:"异常个数"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"warning"}},[e._v(e._s(t.row.stat.errors))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"80",label:"跳过个数"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.row.stat.skipped))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"系统信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("HttpRunner: "+e._s(t.row.platform.httprunner_version))]),e._v(" "),a("p",[e._v("Platform: "+e._s(t.row.platform.platform))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.platform.python_version))])],1)])]}}])}),e._v(" "),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.currentRow===t.row,expression:"currentRow === scope.row"}]},[a("el-button",{attrs:{type:"info",title:"查看报告",icon:"el-icon-view",circle:"",size:"mini"},on:{click:function(a){e.handleWatchReports(t.row.id)}}}),e._v(" "),a("el-button",{attrs:{type:"danger",title:"删除报告",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(a){e.handleDelReports(t.row.id)}}})],1)]}}])})],1)],1)])],1)],1)},staticRenderFns:[]};var xe=a("VU/8")(ke,we,!1,function(e){a("X+D5")},"data-v-4ee949db",null).exports,Te={props:{save:Boolean,parameters:{require:!1}},computed:{height:function(){return window.screen.height-440}},methods:{parseParameters:function(){var e={parameters:[],desc:{}},t=!0,a=!1,n=void 0;try{for(var i,s=P()(this.tableData);!(t=(i=s.next()).done);t=!0){var r=i.value,o=r.value,l=r.key,c={};if(""!==l&&""!==o){try{o=JSON.parse(o)}catch(e){}c[l]=o,e.parameters.push(c),e.desc[l]=r.desc}}}catch(e){a=!0,n=e}finally{try{!t&&s.return&&s.return()}finally{if(a)throw n}}return e},cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""},handleEdit:function(e,t){this.tableData.push({key:"",value:"",desc:""})},handleDelete:function(e,t){this.tableData.splice(e,1)}},watch:{save:function(){this.$emit("parameters",this.parseParameters(),this.tableData)},parameters:function(){0!==this.parameters.length&&(this.tableData=this.parameters)}},data:function(){return{currentRow:"",tableData:[{key:"",value:"",desc:""}]}},name:"Parameters"},Ce={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",height:e.height,data:e.tableData,border:!1,"cell-style":{paddingTop:"4px",paddingBottom:"4px"}},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave}},[a("el-table-column",{attrs:{label:"数据Key",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:8},clearable:"",placeholder:"key 、 key-key1"},model:{value:t.row.key,callback:function(a){e.$set(t.row,"key",a)},expression:"scope.row.key"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"数据内容",width:"700"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:8},clearable:"",placeholder:"${ fun() } 、 [ value ] 、 [ [ value1, value2 ] ]"},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"参数描述",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"参数简要描述"},model:{value:t.row.desc,callback:function(a){e.$set(t.row,"desc",a)},expression:"scope.row.desc"}})]}}])}),e._v(" "),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:t.row===e.currentRow,expression:"scope.row === currentRow"}]},[a("el-button",{attrs:{icon:"el-icon-circle-plus-outline",size:"mini",type:"info"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==t.$index,expression:"scope.$index !== 0"}],attrs:{icon:"el-icon-delete",size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}})],1)]}}])})],1)},staticRenderFns:[]};var Se={components:{Headers:I,Request:V,Variables:H,Hooks:J,Parameters:a("VU/8")(Te,Ce,!1,function(e){a("wBKj")},"data-v-1227be0d",null).exports},props:{project:{require:!1},response:{require:!1}},watch:{response:function(){this.name=this.response.body.name,this.baseUrl=this.response.body.base_url,this.id=this.response.id}},methods:{handleHeader:function(e){this.header=e},handleRequest:function(e){this.request=e},handleVariables:function(e){this.variables=e},handleHooks:function(e){this.hooks=e},handleParameters:function(e){this.parameters=e,""===this.id?this.addConfig():this.updateConfig()},addConfig:function(){var e=this;this.validateData()&&this.$api.addConfig({parameters:this.parameters,header:this.header,request:this.request,variables:this.variables,hooks:this.hooks,base_url:this.baseUrl,name:this.name,project:this.project}).then(function(t){t.success?e.$emit("addSuccess"):e.$message.error({message:t.msg,duration:1e3})})},updateConfig:function(){var e=this;this.validateData()&&this.$api.updateConfig(this.id,{parameters:this.parameters,header:this.header,request:this.request,variables:this.variables,hooks:this.hooks,base_url:this.baseUrl,name:this.name}).then(function(t){t.success?e.$emit("addSuccess"):e.$message.error({message:t.msg,duration:1e3})})},validateData:function(){return""!==this.name||(this.$notify.error({title:"参数错误",message:"配置名称不能为空",duration:1500}),!1)}},data:function(){return{name:"",baseUrl:"",id:"",header:[],request:[],variables:[],hooks:[],parameters:[],save:!1,activeTag:"third"}},name:"ConfigBody"},$e={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-left":"10px"}},[a("div",{staticStyle:{"margin-top":"10px"}},[a("el-input",{staticStyle:{width:"600px"},attrs:{placeholder:"请输入配置名称",clearable:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[a("template",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("配置信息录入")]),e._v(" "),a("el-button",{attrs:{slot:"append",type:"success",plain:""},on:{click:function(t){e.save=!e.save}},slot:"append"},[e._v("Save\n            ")])],2)],1),e._v(" "),a("div",[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入 base_url 地址",clearable:""},model:{value:e.baseUrl,callback:function(t){e.baseUrl=t},expression:"baseUrl"}},[a("template",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("配置请求地址")])],2)],1),e._v(" "),a("div",{staticClass:"request"},[a("el-tabs",{staticStyle:{"margin-left":"20px"},model:{value:e.activeTag,callback:function(t){e.activeTag=t},expression:"activeTag"}},[a("el-tab-pane",{attrs:{label:"Header",name:"first"}},[a("headers",{attrs:{save:e.save,header:e.response?e.response.body.header:[]},on:{header:e.handleHeader}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Request",name:"second"}},[a("request",{attrs:{save:e.save,request:e.response?e.response.body.request:[]},on:{request:e.handleRequest}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Variables",name:"third"}},[a("variables",{attrs:{save:e.save,variables:e.response?e.response.body.variables:[]},on:{variables:e.handleVariables}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Hooks",name:"fourth"}},[a("hooks",{attrs:{save:e.save,hooks:e.response?e.response.body.hooks:[]},on:{hooks:e.handleHooks}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Parameters",name:"five"}},[a("parameters",{attrs:{save:e.save,parameters:e.response?e.response.body.parameters:[]},on:{parameters:e.handleParameters}})],1)],1)],1)])},staticRenderFns:[]};var Pe=a("VU/8")(Se,$e,!1,function(e){a("0F3N")},"data-v-16dcee8b",null).exports,De={name:"ConfigList",props:{back:Boolean,project:{require:!0},del:Boolean},data:function(){return{search:"",selectConfig:[],currentRow:"",currentPage:1,configData:{count:0,results:[]},formRecordConfig:{configName:"",configUrl:""}}},watch:{back:function(){this.getConfigList()},del:function(){var e=this;0!==this.selectConfig.length?this.$confirm("此操作将永久删除配置，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.delAllConfig({data:e.selectConfig}).then(function(t){e.getConfigList()})}):this.$notify.warning({title:"提示",message:"请至少勾选一个配置",duration:1e3})}},methods:{handleSelectionChange:function(e){this.selectConfig=e},handleCurrentChange:function(e){var t=this;this.$api.getConfigPaginationBypage({params:{page:this.currentPage,project:this.project,search:this.search}}).then(function(e){t.configData=e})},handleDelConfig:function(e){var t=this;this.$confirm("此操作将永久删除该配置，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$api.deleteConfig(e).then(function(e){e.success?t.getConfigList():t.$message.error(e.msg)})})},handleEditConfig:function(e){this.$emit("respConfig",e)},handleCopyConfig:function(e){var t=this;this.$prompt("请输入配置名称","提示",{confirmButtonText:"确定",inputPattern:/^[\s\S]*.*[^\s][\s\S]*$/,inputErrorMessage:"配置名称不能为空"}).then(function(a){var n=a.value;t.$api.copyConfig(e,{name:n}).then(function(e){e.success?t.getConfigList():t.$message.error(e.msg)})})},cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""},getConfigList:function(){var e=this;this.$api.configList({params:{project:this.project,search:this.search}}).then(function(t){e.configData=t})}},mounted:function(){this.getConfigList()}},Ae={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{"padding-top":"20px",height:"50px"}},[a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入配置名称",clearable:"",size:"small"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getConfigList},slot:"append"})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.configData.count,expression:"configData.count !== 0 "}],attrs:{"page-size":11,background:"","current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.configData.count},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)],1)],1)]),e._v(" "),a("el-container",[a("el-main",{staticStyle:{padding:"0","margin-left":"10px","margin-top":"10px"}},[a("div",{staticStyle:{position:"fixed",bottom:"0",right:"0",left:"220px",top:"170px"}},[a("el-table",{attrs:{"highlight-current-row":"",data:e.configData.results,"show-header":0!==e.configData.results.length,stripe:"",height:"calc(100%)"},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"配置名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"基本请求地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{domProps:{textContent:e._s(""===t.row.base_url?"无":t.row.base_url)}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"更新时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("datetimeFormat")(t.row.update_time)))])]}}])}),e._v(" "),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.currentRow===t.row,expression:"currentRow === scope.row"}]},[a("el-button",{attrs:{type:"info",title:"修改配置",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(a){e.handleEditConfig(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-document",title:"复制配置",circle:"",size:"mini"},on:{click:function(a){e.handleCopyConfig(t.row.id)}}}),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",title:"删除配置",circle:"",size:"mini"},on:{click:function(a){e.handleDelConfig(t.row.id)}}})],1)]}}])})],1)],1)])],1)],1)},staticRenderFns:[]};var Ie={components:{ConfigBody:Pe,ConfigList:a("VU/8")(De,Ae,!1,function(e){a("/68x")},"data-v-cf54b056",null).exports},computed:{initResponse:{get:function(){return this.addConfigActivate},set:function(e){this.addConfigActivate=e,this.respConfig={id:"",body:{name:"",base_url:"",header:[{key:"",value:"",desc:""}],request:{data:[{key:"",value:"",desc:"",type:1}],params:[{key:"",value:"",desc:"",type:1}],json_data:""},variables:[{key:"",value:"",desc:"",type:1}],hooks:[{setup:"",teardown:""}],parameters:[{key:"",value:"",desc:""}]}}}}},data:function(){return{search:"",back:!1,del:!1,addConfigActivate:!1,respConfig:"",formInline:{user:""},formRecordConfig:{configName:"",configUrl:""}}},methods:{handleAddSuccess:function(){this.back=!this.back,this.addConfigActivate=!1},handleRespConfig:function(e){this.respConfig=e,this.addConfigActivate=!0},configSubmit:function(){var e=this;this.$api.configList({params:{project:this.$route.params.id,search:this.search}}).then(function(t){e.projectData=t})}},name:"RecordConfig",mounted:function(){}},Fe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{background:"#fff",padding:"0",height:"50px"}},[a("div",{staticClass:"nav-api-header"},[a("div",{staticStyle:{"padding-top":"10px","margin-left":"30px"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.initResponse=!0}}},[e._v("新增配置\n                    ")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(t){e.del=!e.del}}},[e._v("批量删除")]),e._v(" "),a("el-button",{staticStyle:{position:"absolute",right:"30px"},attrs:{disabled:!e.addConfigActivate,type:"text"},on:{click:function(t){e.addConfigActivate=!1}}},[e._v("返回列表")])],1)])]),e._v(" "),a("el-container",[a("el-main",{staticStyle:{padding:"0","margin-left":"10px"}},[a("config-body",{directives:[{name:"show",rawName:"v-show",value:e.addConfigActivate,expression:"addConfigActivate"}],attrs:{project:e.$route.params.id,response:e.respConfig},on:{addSuccess:e.handleAddSuccess}}),e._v(" "),e.addConfigActivate?e._e():a("config-list",{attrs:{project:e.$route.params.id,del:e.del,back:e.back},on:{respConfig:e.handleRespConfig}})],1)],1)],1)},staticRenderFns:[]};var je=a("VU/8")(Ie,Fe,!1,function(e){a("5M1G")},null,null).exports,Ve={name:"AddTasks",props:{ruleForm:{require:!0},args:{require:!0},scheduleId:{require:!0}},watch:{filterText:function(e){this.$refs.tree2.filter(e)}},components:{draggable:oe.a},data:function(){return{currentTest:"",length:0,testData:[],currentSuite:"",search:"",next:!1,node:"",currentPage:1,filterText:"",expand:"&#xe65f;",dataTree:[],suiteData:{count:0,results:[]},rules:{name:[{required:!0,message:"请输入任务名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],corntab:[{required:!0,message:"请输入正确的crontab表达式",trigger:"blur"}]},editTestCaseActivate:!1}},methods:{handleNewTestCase:function(e){this.editTestCaseActivate=!1,this.next=!0,this.testData[this.currentTest].kwargs=e},saveTask:function(){var e=this,t=[],a=!0,n=!1,i=void 0;try{for(var s,r=P()(this.testData);!(a=(s=r.next()).done);a=!0){var o=s.value;t.push(o.id)}}catch(e){n=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(n)throw i}}var l=this.ruleForm;l.data=t,l.project=this.$route.params.id,""===this.scheduleId?this.$api.addTask(l).then(function(t){t.success?e.$emit("changeStatus",!1):e.$message.error(t.msg)}):this.$api.updateTask(this.scheduleId,{project:this.$route.params.id},l).then(function(t){200===t.status&&(e.$notify.success("更新定时任务成功"),e.$emit("changeStatus",!1))})},dragEnd:function(e){this.testData.length>this.length&&this.testData.splice(this.length,1)},drop:function(e){e.preventDefault(),this.testData.push(this.currentSuite)},allowDrop:function(e){e.preventDefault()},handlePageChange:function(e){var t=this;this.$api.getTestPaginationBypage({params:{page:this.currentPage,node:this.node,project:this.$route.params.id,search:""}}).then(function(e){t.suiteData=e})},handleCurrentChange:function(e){var t=this;this.$api.getTestPaginationBypage({params:{page:this.currentPage,project:this.$route.params.id,node:this.node,search:this.search}}).then(function(e){t.suiteData=e})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.next=!0}),this.testData=this.args.map(function(e){return t.suiteData.results.filter(function(t){return t.id===e})[0]})},resetForm:function(e){this.$refs[e].resetFields()},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},getTree:function(){var e=this;this.$api.getTree(this.$route.params.id,{params:{type:2}}).then(function(t){e.dataTree=t.tree})},handleNodeClick:function(e){this.node=e.id,this.getTestList()},getTestList:function(){var e=this;this.$api.testList({params:{project:this.$route.params.id,node:this.node,search:this.search}}).then(function(t){e.suiteData=t})}},mounted:function(){this.getTree(),this.getTestList()}},Re={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[e.next?e._e():[a("el-main",{staticStyle:{"padding-top":"0"}},[a("div",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:12}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"任务名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入任务名称",clearable:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"时间配置",prop:"corntab"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入crontab表达式，例如 */30 * * * *"},model:{value:e.ruleForm.corntab,callback:function(t){e.$set(e.ruleForm,"corntab",t)},expression:"ruleForm.corntab"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"任务状态",prop:"switch"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.ruleForm.switch,callback:function(t){e.$set(e.ruleForm,"switch",t)},expression:"ruleForm.switch"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"信息策略",prop:"strategy"}},[a("el-radio-group",{model:{value:e.ruleForm.strategy,callback:function(t){e.$set(e.ruleForm,"strategy",t)},expression:"ruleForm.strategy"}},[a("el-radio",{attrs:{label:"始终发送"}}),e._v(" "),a("el-radio",{attrs:{label:"仅失败发送"}}),e._v(" "),a("el-radio",{attrs:{label:"从不发送"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"邮件接收",prop:"receiver"}},[a("el-input",{attrs:{type:"textarea",placeholder:"多个接收人以;分隔",clearable:""},model:{value:e.ruleForm.receiver,callback:function(t){e.$set(e.ruleForm,"receiver",t)},expression:"ruleForm.receiver"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮件抄送",prop:"copy"}},[a("el-input",{attrs:{type:"textarea",placeholder:"多个抄送人以;分隔",clearable:""},model:{value:e.ruleForm.copy,callback:function(t){e.$set(e.ruleForm,"copy",t)},expression:"ruleForm.copy"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"webhook",prop:"webhook"}},[a("el-input",{attrs:{placeholder:"请填写正确且完整的webhookURL路径",clearable:""},model:{value:e.ruleForm.webhook,callback:function(t){e.$set(e.ruleForm,"webhook",t)},expression:"ruleForm.webhook"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("下一步")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)],1)])],e._v(" "),e.next?[a("el-aside",{staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"nav-api-side"},[a("div",{staticClass:"api-tree"},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤",size:"medium",clearable:"","prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree2",attrs:{data:e.dataTree,"node-key":"id","default-expand-all":!1,"expand-on-click-node":!1,"highlight-current":"","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node;return t.data,a("span",{staticClass:"custom-tree-node"},[a("span",[a("i",{staticClass:"iconfont",domProps:{innerHTML:e._s(e.expand)}}),e._v("  "+e._s(n.label))])])}}])})],1)])]),e._v(" "),a("el-main",{staticStyle:{"padding-top":"0px"}},[a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.suiteData.count,expression:"suiteData.count !== 0"}],staticStyle:{"text-align":"center"},attrs:{"page-size":11,background:"","current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.suiteData.count},on:{"current-change":e.handlePageChange,"update:currentPage":function(t){e.currentPage=t}}})],1),e._v(" "),a("el-col",{attrs:{span:12}},[e.testData.length>0?a("el-button",{attrs:{type:"primary"},on:{click:e.saveTask}},[e._v("保存")]):e._e(),e._v(" "),e.testData.length>0?a("el-button",{on:{click:function(t){e.next=!1}}},[e._v("上一步")]):e._e()],1)],1)],1),e._v(" "),a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},e._l(e.suiteData.results,function(t,n){return a("div",{key:n,staticStyle:{cursor:"pointer","margin-top":"10px",overflow:"auto"},attrs:{draggable:"true"},on:{dragstart:function(a){e.currentSuite=JSON.parse(JSON.stringify(t))}}},[a("div",{staticClass:"block block_options"},[a("span",{staticClass:"block-method block_method_options block_method_color"},[e._v("Case")]),e._v(" "),a("span",{staticClass:"block_name"},[e._v(e._s(t.name))])])])})),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticStyle:{"max-height":"600px",overflow:"auto"},on:{drop:function(t){e.drop(t)},dragover:function(t){e.allowDrop(t)}}},[0===e.testData.length?a("span",{staticStyle:{color:"red"}},[e._v("温馨提示："),a("br"),e._v("选择左侧相应API拖拽至此区域组成业务用例"),a("br"),e._v("\n                                上下拖动此区域接口调整接口调用顺序\n                            ")]):e._e(),e._v(" "),a("div",{staticClass:"test-list"},[a("draggable",{attrs:{options:{animation:200}},on:{end:e.dragEnd,start:function(t){e.length=e.testData.length}},model:{value:e.testData,callback:function(t){e.testData=t},expression:"testData"}},e._l(e.testData,function(t,n){return a("div",{key:n,staticClass:"block block_test",on:{mousemove:function(t){e.currentTest=n}}},[a("span",{staticClass:"block-method block_method_test block_method_color"},[e._v("Tasks")]),e._v(" "),a("span",{staticClass:"block-test-name"},[e._v(e._s(t.name))]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.currentTest===n,expression:"currentTest === index"}],staticStyle:{position:"absolute",right:"12px",top:"8px"},attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(t){e.testData.splice(n,1)}}})],1)}))],1)])])],1)],1)])]:e._e()],2)},staticRenderFns:[]};var Ne={components:{AddTasks:a("VU/8")(Ve,Re,!1,function(e){a("Rw7z")},"data-v-912d9d00",null).exports},data:function(){return{search:"",addTasks:!1,currentPage:1,currentRow:"",tasksData:{count:0,results:[]},ruleForm:{name:"",switch:!0,corntab:"",strategy:"始终发送",receiver:"",copy:"",webhook:""}}},methods:{handleAddTask:function(){this.addTasks=!0,this.scheduleId="",this.ruleForm={name:"",switch:!0,corntab:"",strategy:"始终发送",receiver:"",copy:"",webhook:""},this.args=[]},delTasks:function(e){var t=this;this.$confirm("此操作将永久删除该定时任务，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$api.deleteTasks(e).then(function(e){e.success&&t.getTaskList()})})},handleCurrentChange:function(e){var t=this;this.$api.getTaskPaginationBypage({params:{page:this.currentPage,project:this.$route.params.id,search:this.search}}).then(function(e){t.tasksData=e})},runTask:function(e){var t=this;this.$api.runTask(e).then(function(e){e.success?t.$message.info({title:"提示",message:e.msg,duration:2e3,center:!0}):t.$message.error({message:e.msg,duration:2e3,center:!0})})},handleEditSchedule:function(e,t){this.addTasks=!0,this.scheduleId=e,this.ruleForm.corntab=t.kwargs.corntab,this.ruleForm.strategy=t.kwargs.strategy,this.ruleForm.receiver=t.kwargs.receiver,this.ruleForm.copy=t.kwargs.copy,this.ruleForm.name=t.name,this.ruleForm.switch=t.enabled,this.ruleForm.webhook=t.kwargs.webhook,this.args=t.args},changeStatus:function(e){this.getTaskList(),this.addTasks=e,this.args=[],this.ruleForm={name:"",switch:!0,corntab:"",strategy:"始终发送",receiver:"",copy:"",webhook:""}},getTaskList:function(){var e=this;this.$api.taskList({params:{project:this.$route.params.id,search:this.search}}).then(function(t){e.tasksData=t})},cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""},selectionTask:function(e){this.tasksData=e},delSelectionTask:function(){var e=this;0!==this.tasksData.length?this.$confirm("此操作将永久删除勾选的定时任务，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.delAllTasks({data:e.tasksData}).then(function(t){e.getTaskList()})}):this.$notify.warning({title:"提示",message:"请至少勾选一个全局变量",duration:1e3})},handleSwitchChange:function(e,t){var a=this;this.$api.patchTask(e,{switch:t}).then(function(e){e.success?a.$notify.success("更新定时任务成功！"):a.$notify.success("更新定时任务失败！"),a.getTaskList()})}},name:"Tasks",mounted:function(){this.getTaskList()}},Le={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{background:"#fff",padding:"0",height:"50px"}},[a("div",{staticClass:"nav-api-header"},[a("div",{staticStyle:{"padding-top":"10px","margin-left":"30px"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:e.handleAddTask}},[e._v("添加任务\n                ")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==e.tasksData.count,expression:"tasksData.count !== 0 "}],staticStyle:{"margin-left":"20px"},attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:e.delSelectionTask}},[e._v("批量删除\n                ")]),e._v(" "),a("el-button",{staticStyle:{position:"absolute",right:"30px"},attrs:{disabled:!e.addTasks,type:"text"},on:{click:function(t){e.addTasks=!1}}},[e._v("返回列表\n                ")])],1)])]),e._v(" "),a("el-container",[e.addTasks?e._e():a("el-header",{staticStyle:{padding:"0",height:"50px"}},[a("div",{staticStyle:{"padding-top":"20px","padding-left":"30px",overflow:"hidden"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入任务名称",clearable:"",size:"small"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getTaskList},slot:"append"})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.tasksData.count,expression:"tasksData.count !== 0 "}],attrs:{"page-size":11,background:"","current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.tasksData.count},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)],1)],1)]),e._v(" "),a("el-main",{staticStyle:{padding:"0","margin-left":"10px","margin-top":"10px"}},[a("div",{staticStyle:{position:"fixed",bottom:"0",right:"0",left:"220px",top:"170px"}},[e.addTasks?e._e():a("el-table",{attrs:{data:e.tasksData.results,"show-header":0!==e.tasksData.results.length,stripe:"","highlight-current-row":"",height:"calc(100%)"},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave,"selection-change":e.selectionTask}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"任务名称",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"120",label:"时间配置"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.kwargs.corntab))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"100",label:"信息策略"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.kwargs.strategy))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"80",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){e.handleSwitchChange(t.row.id,t.row.enabled)}},model:{value:t.row.enabled,callback:function(a){e.$set(t.row,"enabled",a)},expression:"scope.row.enabled"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"250",label:"接收人"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.kwargs.receiver))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"250",label:"抄送人"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.kwargs.copy))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"400",label:"WEBHOOK"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.kwargs.webhook))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.currentRow===t.row,expression:"currentRow === scope.row"}]},[a("el-button",{attrs:{type:"info",icon:"el-icon-edit",title:"编辑定时任务",circle:"",size:"mini"},on:{click:function(a){e.handleEditSchedule(t.row.id,t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-s-opportunity",title:"手动触发定时任务",circle:"",size:"mini"},on:{click:function(a){e.runTask(t.row.id)}}}),e._v(" "),a("el-button",{attrs:{type:"danger",title:"删除定时任务",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(a){e.delTasks(t.row.id)}}})],1)]}}])})],1)],1)]),e._v(" "),e.addTasks?a("add-tasks",{attrs:{ruleForm:e.ruleForm,args:e.args,scheduleId:e.scheduleId},on:{changeStatus:e.changeStatus}}):e._e()],1)],1)},staticRenderFns:[]};var Ee=a("VU/8")(Ne,Le,!1,function(e){a("dND5")},null,null).exports,qe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{background:"#fff",padding:"0",height:"50px"}},[a("div",{staticClass:"nav-api-header"},[a("div",{staticStyle:{"padding-top":"10px","margin-left":"30px"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("新增环境\n                    ")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==e.hostIPData.count,expression:"hostIPData.count !== 0 "}],staticStyle:{"margin-left":"20px"},attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:e.delSelectionHostIP}},[e._v("批量删除")]),e._v(" "),a("el-dialog",{attrs:{title:"添加环境",visible:e.dialogVisible,width:"35%",align:"center"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"variablesForm",staticClass:"project",attrs:{model:e.variablesForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"环境名",prop:"name"}},[a("el-input",{attrs:{resize:"",clearable:"",placeholder:"请输入环境名"},model:{value:e.variablesForm.name,callback:function(t){e.$set(e.variablesForm,"name",t)},expression:"variablesForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"IP列表",prop:"value"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:16},placeholder:"127.0.0.1 localhost\n192.168.0.1 gateway",clearable:""},model:{value:e.variablesForm.value,callback:function(t){e.$set(e.variablesForm,"value",t)},expression:"variablesForm.value"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleConfirm("variablesForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑环境",visible:e.editdialogVisible,width:"35%",align:"center"},on:{"update:visible":function(t){e.editdialogVisible=t}}},[a("el-form",{ref:"editVariablesForm",staticClass:"project",attrs:{model:e.editVariablesForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"环境名",prop:"name"}},[a("el-input",{attrs:{resize:"",clearable:"",placeholder:"请输入环境名"},model:{value:e.editVariablesForm.name,callback:function(t){e.$set(e.editVariablesForm,"name",t)},expression:"editVariablesForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"IP列表",prop:"value"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:16},placeholder:"127.0.0.1 localhost\n192.168.0.1 gateway",clearable:""},model:{value:e.editVariablesForm.value,callback:function(t){e.$set(e.editVariablesForm,"value",t)},expression:"editVariablesForm.value"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editdialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleEditConfirm("editVariablesForm")}}},[e._v("确 定")])],1)],1)],1)])]),e._v(" "),a("el-container",[a("el-header",{staticStyle:{padding:"0",height:"50px"}},[a("div",{staticStyle:{"padding-top":"20px","padding-left":"30px",overflow:"hidden"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入环境名",clearable:"",size:"small"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getHostIPList},slot:"append"})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.hostIPData.count,expression:"hostIPData.count !== 0 "}],attrs:{"page-size":11,background:"","current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.hostIPData.count},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)],1)],1)]),e._v(" "),a("el-container",[a("el-main",{staticStyle:{padding:"0","margin-left":"10px","margin-top":"10px"}},[a("div",{staticStyle:{position:"fixed",bottom:"0",right:"0",left:"220px",top:"170px"}},[a("el-table",{attrs:{"highlight-current-row":"",data:e.hostIPData.results,"show-header":0!==e.hostIPData.results.length,stripe:"",height:"calc(100%)"},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave,"selection-change":e.selectionHost}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"环境名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Host列表"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:5},clearable:"",disabled:""},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"更新时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("datetimeFormat")(t.row.update_time)))])]}}])}),e._v(" "),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.currentRow===t.row,expression:"currentRow === scope.row"}]},[a("el-button",{attrs:{type:"info",title:"修改环境",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(a){e.handleEditHostIP(t.row)}}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==e.hostIPData.count,expression:"hostIPData.count !== 0"}],attrs:{type:"danger",title:"删除环境",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(a){e.handleDelHost(t.row.id)}}})],1)]}}])})],1)],1)])],1)],1)],1)},staticRenderFns:[]};var Be=a("VU/8")({data:function(){return{search:"",currentRow:"",currentPage:1,selectHost:[],hostIPData:{count:0,results:[]},editdialogVisible:!1,dialogVisible:!1,variablesForm:{name:"",value:"",project:this.$route.params.id},editVariablesForm:{name:"",value:"",id:""},rules:{name:[{required:!0,message:"请输入变量名",trigger:"blur"},{min:1,max:100,message:"最多不超过100个字符",trigger:"blur"}],value:[{required:!0,message:"请输入变量值",trigger:"blur"}]}}},methods:{cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""},handleEditHostIP:function(e){this.editVariablesForm={name:e.name,value:e.value,id:e.id},this.editdialogVisible=!0},handleDelHost:function(e){var t=this;this.$confirm("此操作将永久删除该域名，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$api.deleteHost(e).then(function(e){e.success?t.getHostIPList():t.$message.error(e.msg)})})},handleCurrentChange:function(e){var t=this;this.$api.getHostPaginationBypage({params:{page:this.currentPage,project:this.variablesForm.project,search:this.search}}).then(function(e){t.hostIPData=e})},handleConfirm:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.dialogVisible=!1,t.$api.addHostIP(t.variablesForm).then(function(e){e.success?(t.variablesForm.name="",t.variablesForm.value="",t.getHostIPList()):t.$message.info({message:e.msg,duration:1e3})}))})},handleEditConfirm:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.editdialogVisible=!1,t.$api.updateHost(t.editVariablesForm.id,t.editVariablesForm).then(function(e){e.success?t.getHostIPList():t.$message.info({message:e.msg,duration:1e3})}))})},getHostIPList:function(){var e=this;this.$api.hostList({params:{project:this.variablesForm.project,search:this.search}}).then(function(t){e.hostIPData=t})},selectionHost:function(e){this.selectHost=e},delSelectionHostIP:function(){var e=this;0!==this.selectHost.length?this.$confirm("此操作将永久删除勾选的全局变量，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.delAllHost({data:e.selectHost}).then(function(t){e.getHostIPList()})}):this.$notify.warning({title:"提示",message:"请至少勾选一个全局变量",duration:1e3})}},name:"HostAddress",mounted:function(){this.getHostIPList()}},qe,!1,function(e){a("lczB")},null,null).exports,Me={props:{save:Boolean,request:{require:!1}},computed:{height:function(){return window.screen.height-464}},name:"Request",components:{editor:a("o4sT")},watch:{save:function(){this.$emit("request",{json:this.parseJson()},{json_data:this.jsonData})},request:function(){0!==this.request.length&&(this.jsonData=this.request.json_data)}},methods:{editorInit:function(){a("R3yc"),a("NbQv"),a("hzkg"),a("5WxL")},parseJson:function(){var e={};if(""!==this.jsonData)try{e=JSON.parse(this.jsonData)}catch(e){this.$notify.error({title:"json错误",message:"不是标准的json数据格式",duration:2e3})}return e}},data:function(){return{fileList:[],currentIndex:0,currentRow:"",jsonData:"",dataOptions:[{label:"json",value:"json"}],dataType:"json"}}},ze={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{"margin-left":"200px"}},[a("el-radio-group",{model:{value:e.dataType,callback:function(t){e.dataType=t},expression:"dataType"}},e._l(e.dataOptions,function(t){return a("el-radio",{key:t.value,attrs:{label:t.label}},[e._v(e._s(t.value)+"\n            ")])}))],1),e._v(" "),a("div",{staticStyle:{"margin-top":"5px"}},[a("editor",{directives:[{name:"show",rawName:"v-show",value:"json"===e.dataType,expression:"dataType === 'json' "}],attrs:{lang:"json",theme:"github",width:"100%",height:e.height},on:{init:e.editorInit},model:{value:e.jsonData,callback:function(t){e.jsonData=t},expression:"jsonData"}})],1)])},staticRenderFns:[]};var He={components:{Headers:I,Request:V,Extract:L,Validate:B,Variables:H,Hooks:J,Report:Z,Response:a("VU/8")(Me,ze,!1,function(e){a("Qeum")},"data-v-016c44ff",null).exports},props:{host:{require:!1},nodeId:{require:!1},project:{require:!1},config:{require:!1},response:{require:!1}},methods:{handleHeader:function(e){this.header=e},handleRequest:function(e){this.request=e},handleResponseHeader:function(e){this.resp_header=e},handleResponse:function(e){this.response=e},handleValidate:function(e){this.validate=e},handleExtract:function(e){this.extract=e},handleVariables:function(e){this.variables=e},handleHooks:function(e){this.hooks=e,this.run?(this.runAPI(),this.run=!1):""===this.id?this.addAPI():this.updateAPI()},validateData:function(){return""===this.url?(this.$notify.error({title:"url错误",message:"接口请求地址不能为空",duration:1500}),!1):""!==this.name||(this.$notify.error({title:"name错误",message:"接口名称不能为空",duration:1500}),!1)},updateAPI:function(){var e=this;this.validateData()&&this.$api.updateMockAPI(this.id,{header:this.header,resp_header:this.resp_header,request:this.request,response:this.response,extract:this.extract,validate:this.validate,variables:this.variables,hooks:this.hooks,url:this.url,method:this.method,name:this.name,description:this.description,times:this.times}).then(function(t){t.success?e.$emit("addSuccess"):e.$message.error({message:t.msg,duration:1e3})})},addAPI:function(){var e=this;this.validateData()&&this.$api.addMockAPI({header:this.header,resp_header:this.resp_header,request:this.request,response:this.response,extract:this.extract,validate:this.validate,variables:this.variables,hooks:this.hooks,url:this.url,description:this.description,method:this.method,name:this.name,times:this.times,nodeId:this.nodeId,project:this.project}).then(function(t){t.success?e.$emit("addSuccess"):e.$message.error({message:t.msg,duration:1e3})})}},watch:{response:function(){this.name=this.response.body.name,this.description=this.response.body.description,this.method=this.response.body.method,this.url=this.response.body.url,this.times=this.response.body.times,this.id=this.response.id}},data:function(){return{loading:!1,times:0,name:"",url:"",description:"",id:"",header:[],resp_header:[],request:[],response:[],extract:[],validate:[],variables:[],hooks:[],method:"GET",dialogTableVisible:!1,save:!1,run:!1,summary:{},activeTag:"second",httpOptions:[{label:"GET"},{label:"POST"},{label:"PUT"},{label:"DELETE"},{label:"HEAD"},{label:"OPTIONS"},{label:"PATCH"}]}},name:"ApiBody"},Oe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",[a("el-input",{staticStyle:{width:"600px"},attrs:{placeholder:"请输入接口名称",clearable:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[a("template",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("接口信息录入")]),e._v(" "),a("el-button",{attrs:{slot:"append",type:"success",plain:""},on:{click:function(t){e.save=!e.save}},slot:"append"},[e._v("Save\n                ")])],2)],1),e._v(" "),a("div",[a("el-input",{staticStyle:{width:"600px","margin-top":"10px"},attrs:{placeholder:"请输入接口请求地址",clearable:""},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}},[a("el-select",{staticStyle:{width:"125px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:e.method,callback:function(t){e.method=t},expression:"method"}},e._l(e.httpOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})}))],1)],1),e._v(" "),a("div",[a("el-input",{staticStyle:{width:"600px","margin-top":"10px"},attrs:{placeholder:"请输入接口信息描述",clearable:""},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}},[a("template",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("接口信息描述")])],2)],1)]),e._v(" "),a("div",{staticClass:"request"},[e.dialogTableVisible?a("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"70%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("report",{attrs:{summary:e.summary}})],1):e._e(),e._v(" "),a("el-tabs",{staticStyle:{"margin-left":"20px"},model:{value:e.activeTag,callback:function(t){e.activeTag=t},expression:"activeTag"}},[a("el-tab-pane",{attrs:{label:"Header",name:"first"}},[a("headers",{attrs:{save:e.save,header:e.response?e.response.body.header:[]},on:{header:e.handleHeader}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Request",name:"second"}},[a("request",{attrs:{save:e.save,request:e.response?e.response.body.request:[]},on:{request:e.handleRequest}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Response-Header",name:"seventh"}},[a("headers",{attrs:{save:e.save,header:e.response?e.response.body.resp_header:[]},on:{header:e.handleResponseHeader}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Response",name:"eighth"}},[a("Response",{attrs:{save:e.save,request:e.response?e.response.body.response:[]},on:{request:e.handleResponse}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Extract",name:"third",disabled:""}},[a("extract",{attrs:{save:e.save,extract:e.response?e.response.body.extract:[]},on:{extract:e.handleExtract}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Validate",name:"fourth",disabled:""}},[a("validate",{attrs:{save:e.save,validate:e.response?e.response.body.validate:[]},on:{validate:e.handleValidate}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Variables",name:"five",disabled:""}},[a("variables",{attrs:{save:e.save,variables:e.response?e.response.body.variables:[]},on:{variables:e.handleVariables}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Hooks",name:"six",disabled:""}},[a("hooks",{attrs:{save:e.save,hooks:e.response?e.response.body.hooks:[]},on:{hooks:e.handleHooks}})],1)],1)],1)])},staticRenderFns:[]};var Ue=a("VU/8")(He,Oe,!1,function(e){a("qB5S")},"data-v-3706ba8a",null).exports,Je=a("//Fk"),Ke=a.n(Je),Ge=a("mtWM"),Ze=a.n(Ge),Ye={routerName:null,token:null,user:null},Xe="http://118.178.137.44:6002";Ze.a.defaults.withCredentials=!0,Ze.a.defaults.baseURL=Xe,Ze.a.interceptors.request.use(function(e){return-1!==e.url.indexOf("/api/runner/project/?cursor=")||e.url.startsWith("/api/user/")||(e.url=e.url+"?token="+Ye.token),e},function(e){return Ke.a.reject(e)}),Ze.a.interceptors.response.use(function(e){return e},function(e){try{401===e.response.status&&La.replace({name:"Login"}),500===e.response.status&&s.Message.error({message:"服务器内部异常, 请检查",duration:1e3})}catch(e){s.Message.error({message:"服务器连接超时，请重试",duration:1e3})}});var We=function(e){return Ze.a.post("/api/user/register/",e).then(function(e){return e.data})},Qe=function(e){return Ze.a.post("/api/user/login/",e).then(function(e){return e.data})},et=function(e){return Ze.a.post("/api/runner/project/",e).then(function(e){return e.data})},tt=function(e){return Ze.a.delete("/api/runner/project/",e).then(function(e){return e.data})},at=function(e){return Ze.a.get("/api/runner/project/",e).then(function(e){return e.data})},nt=function(e){return Ze.a.get("/api/runner/project/"+e+"/").then(function(e){return e.data})},it=function(e){return Ze.a.get(e).then(function(e){return e.data})},st=function(e){return Ze.a.patch("/api/runner/project/",e).then(function(e){return e.data})},rt=function(e){return Ze.a.get("/api/runner/debugtalk/"+e+"/").then(function(e){return e.data})},ot=function(e){return Ze.a.patch("/api/runner/debugtalk/",e).then(function(e){return e.data})},lt=function(e){return Ze.a.post("/api/runner/debugtalk/",e).then(function(e){return e.data})},ct=function(e,t){return Ze.a.get("/api/runner/tree/"+e+"/",t).then(function(e){return e.data})},ut=function(e,t){return Ze.a.patch("/api/runner/tree/"+e+"/",t).then(function(e){return e.data})},dt=function(e){return Xe+"/api/runner/file/?token="+Ye.token},pt=function(e){return Ze.a.post("/api/runner/api/",e).then(function(e){return e.data})},ht=function(e,t){return Ze.a.patch("/api/runner/api/"+e+"/",t).then(function(e){return e.data})},mt=function(e){return Ze.a.get("/api/runner/api/",e).then(function(e){return e.data})},ft=function(e){return Ze.a.delete("/api/runner/api/"+e+"/").then(function(e){return e.data})},vt=function(e){return Ze.a.delete("/api/runner/api/",e).then(function(e){return e.data})},gt=function(e){return Ze.a.get("/api/runner/api/"+e+"/").then(function(e){return e.data})},bt=function(e){return Ze.a.get("/api/runner/api/",e).then(function(e){return e.data})},_t=function(e){return Ze.a.post("/api/runner/test/",e).then(function(e){return e.data})},yt=function(e,t){return Ze.a.patch("/api/runner/test/"+e+"/",t).then(function(e){return e.data})},kt=function(e){return Ze.a.get("/api/runner/test/",e).then(function(e){return e.data})},wt=function(e){return Ze.a.delete("/api/runner/test/"+e+"/").then(function(e){return e.data})},xt=function(e){return Ze.a.delete("/api/runner/test/",e).then(function(e){return e.data})},Tt=function(e,t){return Ze.a.post("/api/runner/test/"+e+"/",t).then(function(e){return e.data})},Ct=function(e){return Ze.a.get("/api/runner/teststep/"+e+"/").then(function(e){return e.data})},St=function(e){return Ze.a.get("/api/runner/test/",e).then(function(e){return e.data})},$t=function(e){return Ze.a.post("/api/runner/config/",e).then(function(e){return e.data})},Pt=function(e,t){return Ze.a.patch("/api/runner/config/"+e+"/",t).then(function(e){return e.data})},Dt=function(e){return Ze.a.get("/api/runner/config/",e).then(function(e){return e.data})},At=function(e,t){return Ze.a.post("/api/runner/config/"+e+"/",t).then(function(e){return e.data})},It=function(e,t){return Ze.a.post("/api/runner/api/"+e+"/",t).then(function(e){return e.data})},Ft=function(e){return Ze.a.delete("/api/runner/config/"+e+"/").then(function(e){return e.data})},jt=function(e){return Ze.a.delete("/api/runner/config/",e).then(function(e){return e.data})},Vt=function(e){return Ze.a.get("/api/runner/config/",e).then(function(e){return e.data})},Rt=function(e){return Ze.a.get("/api/runner/config/"+e+"/").then(function(e){return e.data})},Nt=function(e){return Ze.a.post("/api/runner/run_api/",e).then(function(e){return e.data})},Lt=function(e,t){return Ze.a.get("/api/runner/run_api_pk/"+e+"/",t).then(function(e){return e.data})},Et=function(e){return Ze.a.post("/api/runner/run_api_tree/",e).then(function(e){return e.data})},qt=function(e){return Ze.a.post("/api/runner/run_testsuite/",e).then(function(e){return e.data})},Bt=function(e){return Ze.a.post("/api/runner/run_test/",e).then(function(e){return e.data})},Mt=function(e,t){return Ze.a.get("/api/runner/run_testsuite_pk/"+e+"/",t).then(function(e){return e.data})},zt=function(e){return Ze.a.post("/api/runner/run_suite_tree/",e).then(function(e){return e.data})},Ht=function(e){return Ze.a.post("/api/runner/variables/",e).then(function(e){return e.data})},Ot=function(e){return Ze.a.get("/api/runner/variables/",e).then(function(e){return e.data})},Ut=function(e){return Ze.a.get("/api/runner/variables/",e).then(function(e){return e.data})},Jt=function(e,t){return Ze.a.patch("/api/runner/variables/"+e+"/",t).then(function(e){return e.data})},Kt=function(e){return Ze.a.delete("/api/runner/variables/"+e+"/").then(function(e){return e.data})},Gt=function(e){return Ze.a.delete("/api/runner/variables/",e).then(function(e){return e.data})},Zt=function(e){return Ze.a.get("/api/runner/reports/",e).then(function(e){return e.data})},Yt=function(e){return Ze.a.delete("/api/runner/reports/"+e+"/").then(function(e){return e.data})},Xt=function(e){return Ze.a.get("/api/runner/reports/",e).then(function(e){return e.data})},Wt=function(e){return Ze.a.delete("/api/runner/reports/",e).then(function(e){return e.data})},Qt=function(e){return Ze.a.get("/api/runner/reports/"+e+"/").then(function(e){return e.data})},ea=function(e){return Ze.a.post("/api/runner/schedule/",e).then(function(e){return e.data})},ta=function(e){return Ze.a.get("/api/runner/schedule/",e).then(function(e){return e.data})},aa=function(e){return Ze.a.get("/api/runner/schedule/",e).then(function(e){return e.data})},na=function(e){return Ze.a.delete("/api/runner/schedule/"+e+"/").then(function(e){return e.data})},ia=function(e){return Ze.a.delete("/api/runner/schedule/",e).then(function(e){return e.data})},sa=function(e){return Ze.a.post("/api/runner/host_ip/",e).then(function(e){return e.data})},ra=function(e){return Ze.a.get("/api/runner/host_ip/",e).then(function(e){return e.data})},oa=function(e,t){return Ze.a.patch("/api/runner/host_ip/"+e+"/",t).then(function(e){return e.data})},la=function(e){return Ze.a.delete("/api/runner/host_ip/"+e+"/").then(function(e){return e.data})},ca=function(e){return Ze.a.delete("/api/runner/host_ip/",e).then(function(e){return e.data})},ua=function(e){return Ze.a.get("/api/runner/host_ip/",e).then(function(e){return e.data})},da=function(e){return Ze.a.get("/api/runner/host_ip/"+e+"/").then(function(e){return e.data})},pa=function(e){return Ze.a.get("/api/runner/schedule/"+e+"/").then(function(e){return e.data})},ha=function(e,t){return Ze.a.patch("/api/runner/api/sync/"+e+"/").then(function(e){return e.data})},ma=function(e){return Ze.a.put("/api/runner/test/"+e+"/").then(function(e){return e.data})},fa=function(e){return Ze.a.patch("/api/runner/test/move_case/",e).then(function(e){return e.data})},va=function(e){return Ze.a.patch("/api/runner/api/move_api/",e).then(function(e){return e.data})},ga=function(e,t,a){return Ze()({url:"/api/runner/schedule/"+e+"/",method:"PUT",params:t,data:a})},ba=function(e){return Ze.a.post("/api/runner/mock_client/",e).then(function(e){return e.data})},_a=function(e){return Ze.a.get("/api/runner/mock_client/",e).then(function(e){return e.data})},ya=function(e){return Ze.a.get("/api/runner/mock_client/",e).then(function(e){return e.data})},ka=function(e){return Ze.a.delete("/api/runner/mock_client/"+e+"/").then(function(e){return e.data})},wa=function(e){return Ze.a.delete("/api/runner/mock_client/",e).then(function(e){return e.data})},xa=function(e){return Ze.a.get("/api/runner/mock_client/"+e+"/").then(function(e){return e.data})},Ta=function(e,t){return Ze.a.put("/api/runner/mock_client/"+e+"/",t).then(function(e){return e.data})},Ca=function(e,t){return Ze.a.post("/api/runner/mock_client/"+e+"/",t).then(function(e){return e.data})},Sa=function(e){return Ze.a.patch("/api/runner/mock_client/move_api/",e).then(function(e){return e.data})},$a=function(e,t){return Ze.a.patch("/api/runner/mock_client/"+e+"/",t).then(function(e){return e.data})},Pa=function(e,t){return Ze.a.patch("/api/runner/schedule/"+e+"/",t).then(function(e){return e.data})},Da=function(e,t){return Ze.a.get("/api/runner/run_mock/"+e+"/",t).then(function(e){return e.data})},Aa={filters:{ellipsis:function(e){return e?e.length>40?e.slice(0,40)+"......":e:""},str_ellipsis:function(e){return e?e.length>10?e.slice(0,10)+"......":e:""}},components:{Report:Z},name:"ApiList",props:{host:{require:!0},config:{require:!0},run:Boolean,back:Boolean,node:{require:!0},project:{require:!0},del:Boolean,move:Boolean,onlyMe:Boolean,isSelectCase:Boolean},data:function(){return{checked:!1,search:"",reportName:"",asyncs:!1,filterText:"",loading:!1,expand:"&#xe65f;",dataTree:{},dialogTreeVisible:!1,dialogTableVisible:!1,dialogTreeMoveAPIVisible:!1,summary:{},selectAPI:[],currentRow:"",currentPage:1,apiData:{count:0,results:[]},base_url:Xe}},watch:{filterText:function(e){this.$refs.tree.filter(e)},run:function(){this.asyncs=!1,this.reportName="",this.getTree("run")},move:function(){this.asyncs=!1,this.reportName="",this.getTree("move")},back:function(){this.getAPIList()},node:function(){this.search="",this.getAPIList()},checked:function(){this.checked?this.toggleAll():this.toggleClear()},del:function(){var e=this;0!==this.selectAPI.length?this.$confirm("此操作将永久删除API，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.delAllMockAPI({data:e.selectAPI}).then(function(t){e.$message.success(t.msg),e.getAPIList()})}):this.$notify.warning({title:"提示",message:"请至少选择一个接口",duration:1e3})}},methods:{handleCopyAPI:function(e){var t=this;this.$prompt("请输入接口名称","提示",{confirmButtonText:"确定",inputPattern:/^[\s\S]*.*[^\s][\s\S]*$/,inputErrorMessage:"接口名称不能为空"}).then(function(a){var n=a.value;t.$api.copyMockAPI(e,{name:n}).then(function(e){e.success?t.getAPIList():t.$message.error(e.msg)})})},handleRunAPI:function(e){var t=this;this.loading=!0,this.$api.runMockAPIByPk(e,{params:{base_url:this.base_url}}).then(function(e){t.summary=e,t.dialogTableVisible=!0,t.loading=!1}).catch(function(e){t.loading=!1})},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},getTree:function(e){var t=this;this.$api.getTree(this.$route.params.id,{params:{type:3}}).then(function(a){t.dataTree=a.tree,"run"===e?t.dialogTreeVisible=!0:t.dialogTreeMoveAPIVisible=t})},moveAPI:function(){var e=this;this.dialogTreeVisible=!1;var t=this.$refs.tree.getCheckedKeys(),a=t.length;0===a?this.$notify.error({title:"提示",message:"请至少选择一个节点",duration:1500}):1!==a?this.$notify.error({title:"提示",message:"API只能移动到一个节点, 现在选了"+a+"个节点",duration:1500}):this.$api.moveMockAPI({project:this.project,relation:t[0],api:this.selectAPI}).then(function(t){t.success?(e.getAPIList(),e.$message.success({message:"移动API成功",duration:1500}),e.dialogTreeMoveAPIVisible=!1,e.resetSearch()):e.$message.error({message:t.msg,duration:1500})})},handleSelectionChange:function(e){this.selectAPI=e,this.selectAPI.length>0?this.$emit("update:isSelectAPI",!0):this.$emit("update:isSelectAPI",!1)},handleSwitchChange:function(e,t,a){var n=this;this.$api.patchMockApi(e,{status:t,url:a}).then(function(e){e.success?n.$notify.success("更新接口状态成功！"):n.$notify.error(e.msg),n.getAPIList()})},toggleAll:function(){this.$refs.multipleTable.toggleAllSelection()},toggleClear:function(){this.$refs.multipleTable.clearSelection()},getAPIList:function(){var e=this;this.$api.mockApiList({params:{node:this.node,project:this.project,search:this.search}}).then(function(t){e.apiData=t})},handleCurrentChange:function(e){var t=this;this.$api.getMockPaginationBypage({params:{page:this.currentPage,node:this.node,project:this.project,search:this.search}}).then(function(e){t.apiData=e})},handleDelApi:function(e){var t=this;this.$confirm("此操作将永久删除该API，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$api.delMockAPI(e).then(function(e){e.success?t.getAPIList():t.$message.error(e.msg)})})},handleRowClick:function(e){var t=this;this.$api.getMockAPISingle(e.id).then(function(e){e.success?t.$emit("api",e):t.$message.error(e.msg)})},cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""}},mounted:function(){this.getAPIList()}},Ia={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{padding:"0",height:"50px"}},[a("div",{staticStyle:{"padding-left":"10px"}},[a("el-row",{attrs:{gutter:50}},[a("el-col",{attrs:{span:1}},[e.apiData.count>0?a("el-checkbox",{staticStyle:{"padding-top":"14px","padding-left":"2px"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}):e._e()],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入接口名称",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getAPIList},slot:"append"})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.apiData.count,expression:"apiData.count !== 0 "}],staticStyle:{"margin-top":"5px"},attrs:{"page-size":11,background:"","current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.apiData.count},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)],1)],1)]),e._v(" "),a("el-container",[a("el-main",{staticStyle:{padding:"0","margin-left":"10px"}},[e.dialogTableVisible?a("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"70%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("report",{attrs:{summary:e.summary}})],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"Move API",visible:e.dialogTreeMoveAPIVisible,width:"45%"},on:{"update:visible":function(t){e.dialogTreeMoveAPIVisible=t}}},[a("div",[a("div",{staticStyle:{"margin-top":"20px"}},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤",size:"medium",clearable:"","prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree",attrs:{"filter-node-method":e.filterNode,data:e.dataTree,"show-checkbox":"","node-key":"id","expand-on-click-node":!1,"check-on-click-node":"","check-strictly":!0,"highlight-current":!0},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node;return t.data,a("span",{staticClass:"custom-tree-node"},[a("span",[a("i",{staticClass:"iconfont",domProps:{innerHTML:e._s(e.expand)}}),e._v("  "+e._s(n.label))])])}}])})],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTreeMoveAPIVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.moveAPI}},[e._v("确 定")])],1)]),e._v(" "),a("div",{staticStyle:{position:"fixed",bottom:"0",right:"0",left:"500px",top:"160px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",height:"calc(100%)",data:e.apiData.results,"show-header":0!==e.apiData.results.length,stripe:""},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"接口名称",width:"130","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"tag",label:"请求类型",width:"100","filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"success","disable-transitions":""}},[e._v(e._s(t.row.method.toUpperCase())+"\n                            ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"80",label:"接口状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){e.handleSwitchChange(t.row.id,t.row.status,t.row.url)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"url",label:"接口路径",width:"300","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"接口描述",width:"250","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"create_time",label:"创建时间",width:"180","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.currentRow===t.row,expression:"currentRow === scope.row"}]},[a("el-button",{attrs:{type:"info",icon:"el-icon-edit",title:"修改 API",circle:"",size:"mini"},on:{click:function(a){e.handleRowClick(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-caret-right",title:"测试 API",circle:"",size:"mini"},on:{click:function(a){e.handleRunAPI(t.row.id)}}}),e._v(" "),a("el-popover",{staticStyle:{"margin-left":"10px"},attrs:{trigger:"hover"}},[a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"success",icon:"el-icon-document",title:"复制 API",circle:"",size:"mini"},on:{click:function(a){e.handleCopyAPI(t.row.id)}}}),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",title:"删除 API",circle:"",size:"mini"},on:{click:function(a){e.handleDelApi(t.row.id)}}})],1),e._v(" "),a("el-button",{attrs:{slot:"reference",icon:"el-icon-more",title:"更多",circle:"",size:"mini"},slot:"reference"})],1)],1)]}}])})],1)],1)],1)],1)],1)},staticRenderFns:[]};var Fa={watch:{filterText:function(e){this.$refs.tree2.filter(e)}},components:{ApiBody:Ue,ApiList:a("VU/8")(Aa,Ia,!1,function(e){a("Css8")},"data-v-02e6d25d",null).exports},computed:{initResponse:{get:function(){return this.addAPIFlag},set:function(e){this.addAPIFlag=e,this.response={id:"",body:{name:"",times:0,url:"",description:"",method:"POST",header:[{key:"",value:"",desc:""}],resp_header:[{key:"",value:"",desc:""}],request:{data:[{key:"",value:"",desc:"",type:3}],params:[{key:"",value:"",desc:"",type:3}],json_data:""},response:{json_data:""},validate:[{expect:"",actual:"",comparator:"equals",type:3}],variables:[{key:"",value:"",desc:"",type:3}],extract:[{key:"",value:"",desc:""}],hooks:[{setup:"",teardown:""}]}}}}},data:function(){return{configOptions:[],hostOptions:[],back:!1,del:!1,run:!1,move:!1,response:"",nodeForm:{name:""},rules:{name:[{required:!0,message:"请输入节点名称",trigger:"blur"},{min:1,max:50,message:"最多不超过50个字符",trigger:"blur"}]},radio:"根节点",addAPIFlag:!1,treeId:"",maxId:"",dialogVisible:!1,currentNode:"",data:"",filterText:"",expand:"&#xe65f;",dataTree:[],isSelectAPI:!1,dynamicTags:this.$route.params.id,base_url:Xe}},methods:{handleDragEnd:function(){this.updateTree(!1)},handleAddSuccess:function(){this.back=!this.back,this.addAPIFlag=!1},handleAPI:function(e){this.addAPIFlag=!0,this.response=e},getTree:function(){var e=this;this.$api.getTree(this.$route.params.id,{params:{type:3}}).then(function(t){e.dataTree=t.tree,e.treeId=t.id,e.maxId=t.max})},updateTree:function(e){var t=this;this.$api.updateTree(this.treeId,{body:this.dataTree,node:this.currentNode.id,mode:e,type:3}).then(function(e){e.success?(t.dataTree=e.tree,t.maxId=e.max):t.$message.error(e.msg)})},deleteNode:function(){var e=this;this.$confirm("此操作将永久删除该节点下所有接口, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){""===e.currentNode?e.$message.info("请选择一个节点"):0!==e.currentNode.children.length?e.$message.warning("此节点有子节点，不可删除！"):(e.remove(e.currentNode,e.data),e.updateTree(!0))})},renameNode:function(){var e=this;this.$prompt("请输入节点名","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"节点名称不能为空"}).then(function(t){var a=t.value,n=e.data.parent,i=n.data.children||n.data;i[i.findIndex(function(t){return t.id===e.currentNode.id})].label=a,e.updateTree(!1)})},handleConfirm:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.append(t.currentNode),t.updateTree(!1),t.dialogVisible=!1,t.nodeForm.name="")})},handleNodeClick:function(e,t){this.addAPIFlag=!1,this.currentNode=e,this.data=t},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},remove:function(e,t){var a=t.parent,n=a.data.children||a.data,i=n.findIndex(function(t){return t.id===e.id});n.splice(i,1)},append:function(e){var t={id:++this.maxId,label:this.nodeForm.name,children:[]};""!==e&&0!==this.dataTree.length&&"根节点"!==this.radio?(e.children||this.$set(e,"children",[]),e.children.push(t)):this.dataTree.push(t)}},name:"RecordApi",mounted:function(){this.getTree(),this.getConfig(),this.getHost()}},ja={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{background:"#fff",padding:"0"}},[a("div",{staticClass:"nav-api-header"},[a("div",{staticStyle:{"padding-top":"10px","margin-left":"10px"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("\n                    新建分组\n                ")]),e._v(" "),a("el-dialog",{attrs:{title:"新建分组",visible:e.dialogVisible,width:"30%",align:"center"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"nodeForm",staticClass:"project",attrs:{model:e.nodeForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"节点名称",prop:"name"}},[a("el-input",{model:{value:e.nodeForm.name,callback:function(t){e.$set(e.nodeForm,"name",t)},expression:"nodeForm.name"}})],1)],1),e._v(" "),a("el-radio-group",{attrs:{size:"small"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[a("el-radio-button",{attrs:{label:"根节点"}}),e._v(" "),a("el-radio-button",{attrs:{label:"子节点"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleConfirm("nodeForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-button",{attrs:{disabled:""===e.currentNode,type:"danger",size:"small",icon:"el-icon-delete"},on:{click:e.deleteNode}},[e._v("删除分组\n                ")]),e._v(" "),a("el-button",{attrs:{disabled:""===e.currentNode,type:"info",size:"small",icon:"el-icon-edit-outline"},on:{click:e.renameNode}},[e._v("重命名\n                ")]),e._v(" "),a("el-button",{attrs:{disabled:""===e.currentNode,type:"primary",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.initResponse=!0}}},[e._v("添加接口\n                ")]),e._v(" "),e.addAPIFlag?e._e():a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{disabled:!e.isSelectAPI,type:"success",icon:"el-icon-smoking",size:"mini"},on:{click:function(t){e.move=!e.move}}},[e._v("移动 API")]),e._v(" "),e.addAPIFlag?e._e():a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(t){e.del=!e.del}}},[e._v("批量删除")]),e._v(" "),a("el-tag",{attrs:{type:"info"}},[e._v("\n                    默认MOCK地址："+e._s(e.base_url)+"/api/runner/mock/"+e._s(e.dynamicTags))])],1)])]),e._v(" "),a("el-container",[a("el-aside",{staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"nav-api-side"},[a("div",{staticClass:"api-tree"},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤",size:"medium",clearable:"","prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree2",attrs:{data:e.dataTree,"node-key":"id","default-expand-all":!1,"expand-on-click-node":!1,draggable:"","highlight-current":"","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick,"node-drag-end":e.handleDragEnd},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node;return t.data,a("span",{staticClass:"custom-tree-node"},[a("span",[a("i",{staticClass:"iconfont",domProps:{innerHTML:e._s(e.expand)}}),e._v("  "+e._s(n.label))])])}}])})],1)])]),e._v(" "),a("el-main",{staticStyle:{padding:"0"}},[a("api-body",{directives:[{name:"show",rawName:"v-show",value:e.addAPIFlag,expression:"addAPIFlag"}],attrs:{nodeId:e.currentNode.id,project:e.$route.params.id,response:e.response},on:{addSuccess:e.handleAddSuccess}}),e._v(" "),a("api-list",{directives:[{name:"show",rawName:"v-show",value:!e.addAPIFlag,expression:"!addAPIFlag"}],attrs:{node:""!==e.currentNode?e.currentNode.id:"",project:e.$route.params.id,del:e.del,move:e.move,back:e.back,isSelectAPI:e.isSelectAPI,run:e.run},on:{api:e.handleAPI,"update:isSelectAPI":function(t){e.isSelectAPI=t}}})],1)],1)],1)},staticRenderFns:[]};var Va=a("VU/8")(Fa,ja,!1,function(e){a("Y+++")},"data-v-47a4dc0f",null).exports,Ra=c.a.prototype.push;c.a.prototype.push=function(e){return Ra.call(this,e).catch(function(e){return e})};var Na=c.a.prototype.replace;c.a.prototype.replace=function(e){return Na.call(this,e).catch(function(e){return e})},i.default.use(c.a);var La=new c.a({mode:"history",routes:[{path:"/",redirect:"/runner/login"},{path:"/runner/register",name:"Register",component:v,meta:{title:"注册"}},{path:"/runner/login",name:"Login",component:b,meta:{title:"登录"}},{path:"/runner",name:"Index",component:m,meta:{title:"项目管理",requireAuth:!0},children:[{name:"ProjectList",path:"project_list",component:k,meta:{title:"项目概述",requireAuth:!0}},{name:"ProjectDetail",path:"project/:id/dashbord",component:x,meta:{title:"项目详情",requireAuth:!0}},{name:"DebugTalk",path:"debugtalk/:id",component:S,meta:{title:"驱动代码",requireAuth:!0}},{name:"RecordApi",path:"api_record/:id",component:ne,meta:{title:"API 接口",requireAuth:!0}},{name:"AutoTest",path:"auto_test/:id",component:be,meta:{title:"API 用例",requireAuth:!0}},{name:"RecordConfig",path:"record_config/:id",component:je,meta:{title:"配置管理",requireAuth:!0}},{name:"GlobalEnv",path:"global_env/:id",component:ye,meta:{title:"全局变量",requireAuth:!0}},{name:"Reports",path:"reports/:id",component:xe,meta:{title:"历史报告",requireAuth:!0}},{name:"Task",path:"tasks/:id",component:Ee,meta:{title:"定时任务",requireAuth:!0}},{name:"HostIP",path:"host_ip/:id",component:Be,meta:{title:"HOST配置",requireAuth:!0}},{name:"MOCK",path:"mock/:id",component:Va,meta:{title:"MOCK接口",requireAuth:!0}}]}]}),Ea=(a("TzC8"),a("6Qis"),a("uyVo"),a("dj7y"),a("d5T6"),a("NYxO"));i.default.use(Ea.a);var qa=new Ea.a.Store({state:Ye,mutations:{isLogin:function(e,t){e.token=t},setUser:function(e,t){e.user=t},setRouterName:function(e,t){e.routerName=t}}});i.default.config.productionTip=!1,i.default.use(r.a),i.default.prototype.$api=n,i.default.filter("datetimeFormat",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YY-MM-DD hh:mm:ss",a=new Date(e),n=a.getFullYear(),i=a.getMonth()+1,s=a.getDate(),r=a.getHours(),o=a.getMinutes(),l=a.getSeconds(),c=Array.apply(null,Array(10)).map(function(e,t){return"0"+t});return t.replace(/YY/g,n).replace(/MM/g,c[i]||i).replace(/DD/g,c[s]||s).replace(/hh/g,c[r]||r).replace(/mm/g,c[o]||o).replace(/ss/g,c[l]||l)}),i.default.filter("timestampToTime",function(e){var t=new Date(1e3*e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+(t.getDate()+" ")+(t.getHours()+":")+(t.getMinutes()+":")+t.getSeconds()}),i.default.prototype.setLocalValue=function(e,t){window.localStorage?localStorage.setItem(e,t):alert("This browser does NOT support localStorage")},i.default.prototype.getLocalValue=function(e){var t=localStorage.getItem(e);return t||""},La.beforeEach(function(e,t,a){setTimeout(function(t){e.meta.title&&(document.title=e.meta.title),e.meta.requireAuth?""!==qa.state.token?a():a({name:"Login"}):a()})}),new i.default({el:"#app",router:La,store:qa,components:{App:l},template:"<App/>",created:function(){null===this.getLocalValue("token")&&this.setLocalValue("token",""),null===this.getLocalValue("user")&&this.setLocalValue("user",""),null===this.getLocalValue("routerName")&&this.setLocalValue("routerName","ProjectList"),this.$store.commit("isLogin",this.getLocalValue("token")),this.$store.commit("setUser",this.getLocalValue("user")),this.$store.commit("setRouterName",this.getLocalValue("routerName"))}})},Qeum:function(e,t){},Rw7z:function(e,t){},TzC8:function(e,t){},UX68:function(e,t){},V9Yx:function(e,t){},"X+D5":function(e,t){},"X4Z/":function(e,t,a){e.exports=a.p+"static/img/bottom-right.15a1e6f.png"},XbMU:function(e,t,a){e.exports=a.p+"static/img/bottom-left.bb819c7.png"},"Y+++":function(e,t){},bc5d:function(e,t){},d5T6:function(e,t){},dND5:function(e,t){},dj7y:function(e,t){},euD6:function(e,t){},fphc:function(e,t){},fsJM:function(e,t){},"ir+L":function(e,t){},kYWU:function(e,t){},lczB:function(e,t){},lq6j:function(e,t){},pkVi:function(e,t){},qB5S:function(e,t){},r5ks:function(e,t){},sTA4:function(e,t){},tvR6:function(e,t){},uyVo:function(e,t){},wBKj:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.9a122fc8129171f49d3c.js.map
